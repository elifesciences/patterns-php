!function e(t,i,n){function s(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return s(i?i:e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=i,this.doc=s,this.$elm=t,this.$elm.classList.add("article-download-links-list--js"),this.$elm.classList.add("visuallyhidden"),this.moveList(),this.$toggler=this.doc.querySelector(".content-header__download_link"),this.$toggler.addEventListener("click",this.toggle.bind(this)))}return s(e,[{key:"moveList",value:function(){var e=this.doc.querySelector(".content-header_top"),t=e.querySelector(".content-header__download_link").nextElementSibling;this.$elm.parentNode.parentNode.classList.add("visuallyhidden"),e.insertBefore(this.$elm,t)}},{key:"toggle",value:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen()?this.close():this.open()}},{key:"isOpen",value:function(){return!this.$elm.classList.contains("visuallyhidden")}},{key:"open",value:function(){this.$elm.classList.remove("visuallyhidden"),this.window.addEventListener("click",this.checkForClose.bind(this))}},{key:"checkForClose",value:function(e){r.areElementsNested(this.$elm,e.target)||this.close()}},{key:"close",value:function(){this.$elm.classList.add("visuallyhidden"),this.window.removeEventListener("click",this.checkForClose.bind(this))}}]),e}()},{"../libs/elife-utils":16}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t.classList.contains("article-section--first")||(this.$elm=t,this.window=i,this.doc=s,this.thresholdWidth=600,this.initialise(this.$elm,s))}return s(e,[{key:"initialise",value:function(e,t){this.$elm.classList.add("article-section--js"),this.$headerLink=this.createHeaderLink(e,t),this.$body=e.querySelector(".article-section__body"),this.setInitialState(e,this.$headerLink,this.$body),this.$elm.addEventListener("expandsection",this.expand.bind(this))}},{key:"createHeaderLink",value:function(e,t){var i=e.querySelector(".article-section__header"),n=t.createElement("A");return n.setAttribute("href","#"),n.classList.add("article-section__header_link"),n.appendChild(i.firstElementChild),i.appendChild(n),n.addEventListener("click",this.toggleState.bind(this)),n}},{key:"setInitialState",value:function(e,t,i){"closed"===e.dataset.initialState||this.viewportNoWiderThan(this.thresholdWidth)?(e.classList.add("article-section--collapsed"),t.classList.add("article-section__header_link--closed"),i.classList.add("visuallyhidden")):(t.classList.remove("article-section__header_link--closed"),i.classList.remove("visuallyhidden"))}},{key:"viewportNoWiderThan",value:function(e){return this.window.matchMedia("(max-width: "+e+"px)").matches}},{key:"toggleState",value:function(e){e.preventDefault(),this.$headerLink.classList.toggle("article-section__header_link--closed"),this.$elm.classList.toggle("article-section--collapsed"),this.$body.classList.toggle("visuallyhidden"),!this.$body.classList.contains("visuallyhidden")&&this.window.MathJax&&this.window.MathJax.Hub.Queue(["Rerender",this.window.MathJax.Hub,this.$elm.id])}},{key:"expand",value:function(e){this.$headerLink.classList.remove("article-section__header_link--closed"),this.$elm.classList.remove("article-section--collapsed"),this.$body.classList.remove("visuallyhidden"),this.window.MathJax&&this.window.MathJax.Hub.Queue(["Rerender",this.window.MathJax.Hub,this.$elm.id]);var t=this.doc.querySelector("#"+e.detail);t&&t.scrollIntoView()}}]),e}()},{}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return n(this,e),t?(this.window=s,this.window.HTMLAudioElement?(console.log("Initialising Audio Player..."),this.$elm=t,this.$audioElement=this.$elm.querySelector("audio"),this.$audioElement?(this.uniqueId=r.uniqueIds.get("audio",a),this.$elm.id=this.uniqueId,this.$playButton=e.buildPlayButton(this),this.$icon=this.$playButton.querySelector(".audio-player__toggle_play_icon"),this.$title=this.prepare$title(this.$elm.querySelector(".audio-player__header"),a),this.$progressTrack=e.buildProgressIndicator(this),this.$progressBar=this.$progressTrack.querySelector('[class*="progress_bar"]'),this.$timeIndicators=e.buildTimeIndicators(this),this.$currentTime=this.$timeIndicators.querySelector('[class*="current_time"]'),this.$duration=this.$timeIndicators.querySelector('[class*="duration"]'),this.duration=null,this.isPlaying=!1,this.$elm.classList.add("audio-player--js"),this.$playButton.classList.add("loading"),this.$audioElement.addEventListener("loadedmetadata",function(){i.playerReady(i)}),this.usingMetadata=!1,void this.loadMetadata(this.$elm.dataset.episodeNumber)):void console.warn("No audio element found")):void console.warn("Audio element not supported")):void console.warn("No element provided")}return s(e,[{key:"playerReady",value:function t(i){i.duration=i.$audioElement.duration,i.$duration.innerHTML=e.secondsToMinutes(i.duration),i.$playButton.addEventListener("click",function(){i.togglePlay(i.$audioElement,i.$playButton)},!1),i.$audioElement.addEventListener("timeupdate",i.update.bind(i)),i.window.addEventListener("hashchange",i.seekNewTime.bind(i)),i.window.addEventListener("load",i.seekNewTime.bind(i)),this.$playButton.classList.remove("loading");var t=void 0;try{t=new CustomEvent("playerReady",{detail:this.uniqueId})}catch(n){t=document.createEvent("playerReady"),t.initCustomEvent("playerReady",!0,!0,{detail:this.uniqueId})}i.window.dispatchEvent(t)}},{key:"prepare$title",value:function(e,t){var i=t.createElement("span");try{i.innerHTML=e.innerHTML}catch(n){return}return i.classList.add("audio-player__title"),e.innerHTML="",e.appendChild(i),i}},{key:"togglePlay",value:function(e,t){this.isPlaying?this.pause(e,t):this.play(e,t)}},{key:"play",value:function(t,i){t.play(),e.updateIconState(this.$icon,"pause"),i.classList.add("audio-player__toggle_play--pauseable"),i.classList.remove("audio-player__toggle_play--playable"),this.isPlaying=!0}},{key:"pause",value:function(t,i){t.pause(),e.updateIconState(this.$icon,"play"),i.classList.add("audio-player__toggle_play--playable"),i.classList.remove("audio-player__toggle_play--pauseable"),this.isPlaying=!1}},{key:"update",value:function(){var t=Math.floor(this.$audioElement.currentTime),i=t/this.duration*100,n=e.secondsToMinutes(t);if(this.$progressBar.style.width=i+"%",this.$currentTime.innerHTML=n,this.usingMetadata){var s=this.getCurrentChapterNumber();this.setCurrentChapterMetadata(this.getChapterMetadataAtTime(t,this.chapterMetadata)),this.getCurrentChapterMetadata().number!==s&&this.changeChapter(this.getCurrentChapterNumber(),this.getCurrentChapterMetadata().title,this.$elm)}this.$audioElement.ended&&(e.updateIconState(this.$icon,"play"),this.isPlaying=!1)}},{key:"changeChapter",value:function(e,t,i){this.setTitle(this.episodeTitle,t);var n=void 0;try{n=new CustomEvent("chapterChanged",{detail:e})}catch(s){n=document.createEvent("chapterChanged"),n.initCustomEvent("chapterChanged",!0,!0,{detail:e})}i.dispatchEvent(n)}},{key:"seekNewTime",value:function(e){var t,i=!1;try{t=e.newURL.substring(e.newURL.indexOf("#")+1),i=!0}catch(e){t=this.window.location.hash.substring(1),i=!1}!isNaN(t)&&t>=0&&(this.seek(t,this.$audioElement),!this.isPlaying&&i&&this.play(this.$audioElement,this.$playButton))}},{key:"handleSeek",value:function(e,t){var i=parseInt(e.offsetX,10),n=t.$progressTrack.clientWidth,s=i/parseInt(n,10);this.seek(s*t.duration,t.$audioElement)}},{key:"seek",value:function(e,t){t.currentTime=e,this.update()}},{key:"setTitle",value:function(e,t){this.title=e,t&&(this.title+=": "+t),this.$title.innerHTML=this.title}},{key:"getCurrentChapterMetadata",value:function(){return this.currentChapterMetadata}},{key:"setCurrentChapterMetadata",value:function(e){this.currentChapterMetadata=e}},{key:"getCurrentChapterNumber",value:function(){return this.getCurrentChapterMetadata().number||0}},{key:"getChapterMetadataAtTime",value:function(e,t){if(!t)return"";var i="",n=0;return t.forEach(function(t,s,r){var a=parseInt(t.time,10),o=s<r.length-1?r[s+1].time:null;e>=a&&(!o||e<o)&&(i=t.title,n=t.number)}),{title:i,number:n}}},{key:"processMetadata",value:function(e){this.episodeTitle="Episode "+e.number,this.setTitle(this.episodeTitle),this.chapterMetadata=this.prepareChapterMetadata(e),this.currentChapterMetadata={number:0,title:""}}},{key:"prepareChapterMetadata",value:function(e){var t=[];return e.chapters.forEach(function(e){t.push({time:e.time,number:e.number,title:e.number+". "+e.title})}),t}},{key:"loadMetadata",value:function(){try{this.processMetadata(JSON.parse(this.$elm.dataset.metadata.replace(/'/g,'"'))),this.usingMetadata=!0}catch(e){console.error(e),this.usingMetadata=!1}}}],[{key:"secondsToMinutes",value:function(e){var t=parseInt(e,10),i=Math.floor(t/60),n=t%60;return n<=9&&(n="0"+n),i+":"+n}},{key:"updateIconState",value:function(t,i){"play"!==i&&"pause"!==i||(t.src=e.getIconPath(i),t.alt=i)}},{key:"buildProgressIndicator",value:function(e){var t=r.buildElement("div",["audio-player__progress"],"","#"+e.uniqueId+' [class*="audio-player__container"]');return r.buildElement("div",["audio-player__progress_bar"],"",t),t.addEventListener("click",function(t){e.handleSeek(t,e)},!1),t}},{key:"buildPlayButton",value:function(t){var i=r.buildElement("button",["audio-player__toggle_play"],"","#"+t.uniqueId+' [class*="audio-player"]',!0),n=r.buildElement("img",["audio-player__toggle_play_icon"],"",i);return n.src=e.getIconPath("play"),n.alt="Play",i}},{key:"buildTimeIndicators",value:function(e){var t=e.uniqueId,i=r.buildElement("div",["audio-player__times"],"","#"+t+" [class*=audio-player__header]",!0);return r.buildElement("span",["audio-player__current_time"],"0:00",i),r.buildElement("span",["audio-player__duration"],"0:00",i),i}},{key:"getIconPath",value:function(e){if("play"===e||"pause"===e)return"../../assets/img/icons/audio-"+e+".svg"}}]),e}()},{"../libs/elife-utils":16}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=i,this.doc=s,this.$elm=t,this.sourceToUse=null,this.thresholdWidth=parseInt(this.$elm.dataset.thresholdWidth,10),this.isValidThreshold(this.thresholdWidth)&&!this.isThresholdMet(this.thresholdWidth,this.window.innerWidth)?this.window.addEventListener("resize",this.resizeHandler.bind(this)):this.init())}return s(e,[{key:"init",value:function(){this.sourceToUse=this.calcSourceToUse(this.$elm,r.isHighDpr(this.window)),this.setDarkBackground(),this.setupEventHandlers(this.$elm,this.setLightBackground.bind(this),this.setDarkBackground.bind(this))}},{key:"isValidThreshold",value:function(e){return!("boolean"==typeof e||null===e||Array.isArray(e)||isNaN(e)||e<0)}},{key:"isThresholdMet",value:function(e,t){return t>=e}},{key:"resizeHandler",value:function(){this.isThresholdMet(this.thresholdWidth,this.window.innerWidth)&&(this.window.removeEventListener("resize",this.resizeHandler.bind(this)),this.init())}},{key:"setupEventHandlers",value:function(e,t,i){null!==e.getAttribute("data-invert-bgcol-on-hover")&&(e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",i))}},{key:"setDarkBackground",value:function(){this.sourceToUse&&(this.$elm.style.backgroundImage=this.getBackgroundImagesString(this.sourceToUse,"linear-gradient(to top, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5))"),this.$elm.style.color="#fff")}},{key:"setLightBackground",value:function(){this.sourceToUse&&(this.$elm.style.backgroundImage=this.getBackgroundImagesString(this.sourceToUse,"linear-gradient(to top, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5))"),this.$elm.style.color="#212121")}},{key:"getBackgroundImagesString",value:function(e,t){return e&&e.length&&0!==e.length?t+", url("+e+")":""}},{key:"calcSourceToUse",value:function(e,t){var i="",n="";return e?(e.dataset?(n=e.dataset.highResImageSource,i=e.dataset.lowResImageSource):(n=e.getAttribute("data-highResImageSource"),i=e.getAttribute("data-lowResImageSource")),t&&!n||!t&&!i?"":t?n:i):""}}]),e}()},{"../libs/elife-utils":16}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=i,this.doc=s,this.$elm=t,this.moveableStage=this.$elm.querySelector(".carousel__items"),this.originalSlideWrappers=this.moveableStage.querySelectorAll(".carousel__item_wrapper"),this.originalSlideCount=this.originalSlideWrappers.length,this.currentSlideCount=this.originalSlideCount,this.originalSlideCount<2||this.init())}return s(e,[{key:"init",value:function(){var e=this;this.currentSlide=1,this.timerInterval=1e4,this.$elm.querySelector(".carousel__heading").classList.add("visuallyhidden"),this.$elm.appendChild(this.buildVisibleControls()),this.$toggler=this.buildControl$toggle(),this.$elm.insertBefore(this.$toggler,this.$elm.querySelector(".carousel__items")),this.updateWidth(),this.updateControlPanel(this.currentSlide),this.togglePlay(this.$toggler),this.$toggler.focus(),this.window.addEventListener("keydown",this.handleKey.bind(this)),this.window.addEventListener("blur",this.cancelTimer.bind(this)),this.window.addEventListener("focus",this.setupTimer.bind(this)),this.window.addEventListener("resize",function(){e.updateWidth(),e.adjustTranslateForResize()}),this.makeSingleSlideATVisible(this.currentSlide)}},{key:"atHide",value:function(e){e.setAttribute("tabindex",-1),e.setAttribute("aria-hidden",!0)}},{key:"atShow",value:function(e){e.removeAttribute("tabindex",-1),e.removeAttribute("aria-hidden",!0)}},{key:"setATVisibility",value:function(e,t){var i=this,n=void 0;n=t?this.atShow:this.atHide,n.call(this,e),[].forEach.call(e.childNodes,function(e){e.nodeType===e.ELEMENT_NODE&&(n.call(i,e),e.hasChildNodes()&&i.setATVisibility(e,t))})}},{key:"makeSingleSlideATVisible",value:function(e){var t=this;[].forEach.call(this.moveableStage.querySelectorAll(".carousel__item_wrapper"),function(e){t.setATVisibility(e,!1)});var i=e||1,n=this.$elm.querySelectorAll(".carousel-item")[i-1];this.setATVisibility(n,!0),n.focus()}},{key:"buildVisibleControls",value:function(){var e=this.buildControl$traverser("previous"),t=this.buildControl$traverser("next");this.buttons={previous:e.querySelector("button"),next:t.querySelector("button")},this.switches=this.buildControl$switches(this.originalSlideCount);var i=r.buildElement("div",["carousel__control_panel"]),n=r.buildElement("div",["carousel__control_panel__visible"]),s=[e,this.switches,t];return s.forEach(function(e){n.appendChild(e)}),i.appendChild(n),i}},{key:"buildControl$traverser",value:function(e){var t=this,i="previous"===e?"previous":"next",n=e+" item",s=r.buildElement("div",["carousel__control_wrapper"]),a=r.buildElement("button",["carousel__control","carousel__control--traverse","carousel__control--"+i],"",s);return a.addEventListener("click",function(){t.userInitiatedProgression(t[i])}),r.buildElement("span",["visuallyhidden"],n,a),s}},{key:"buildControl$toggle",value:function(){var e=this,t=r.buildElement("button",["carousel__control--toggler","visuallyhidden"],"Play carousel");return t.setAttribute("aria-label","The carousel is now paused. Play carousel"),t.addEventListener("click",function(){e.togglePlay(t)}),t}},{key:"buildControl$switches",value:function(e){for(var t=r.buildElement("ol",["carousel__control_switches"]),i=1;i<=e;i+=1)t.appendChild(this.buildControl$switch("Go to item "+i+" of "+this.originalSlideCount,i));return t.addEventListener("click",this.activateSwitch.bind(this)),t}},{key:"buildControl$switch",value:function(e,t){var i=r.buildElement("li",["carousel__control--switch-item"]),n=r.buildElement("button",["carousel__control","carousel__control--switch"],"",i),s=r.buildElement("span",["visuallyhidden"],""+t,n);return s.setAttribute("aria-label",e),i}},{key:"togglePlay",value:function(e){var t=e.innerHTML;"Pause carousel"===t?(e.innerHTML="Play carousel",e.setAttribute("aria-label","The carousel is now paused. Play carousel"),this.timerStopped=!0,this.cancelTimer()):(e.innerHTML="Pause carousel",e.setAttribute("aria-label","The carousel is now playing. Pause carousel"),this.timerStopped=!1,this.setupTimer())}},{key:"cancelTimer",value:function(){this.window.clearInterval(this.timer)}},{key:"setupTimer",value:function(){var e=this;this.cancelTimer(),this.timerStopped=!1,this.timer=this.startNewAdvancementTimer(this.timerInterval),this.$elm.addEventListener("mouseenter",this.cancelTimer.bind(this)),this.$elm.addEventListener("mouseleave",function(){e.cancelTimer(),e.timerStopped||(e.timer=e.startNewAdvancementTimer(e.timerInterval))})}},{key:"startNewAdvancementTimer",value:function(e){var t=this;return this.window.setInterval(function(){t.timerStopped||t.next()},e)}},{key:"handleKey",value:function(e){var t=e.keyCode||e.charCode;37!==t&&39!==t||(this.timerStopped=!0,37===t?this.userInitiatedProgression(this.previous):this.userInitiatedProgression(this.next))}},{key:"userInitiatedProgression",value:function(e){this.timerStopped=!0,e&&"function"==typeof e&&e.call(this,!0)}},{key:"next",value:function(){this.currentSlide%this.originalSlideCount===0&&this.extendStage(),this.updateSlide(),this.updateControlPanel(this.currentSlide)}},{key:"previous",value:function(){this.currentSlide>1&&(this.updateSlide("previous"),this.updateControlPanel(this.currentSlide))}},{key:"extendStage",value:function(){var e=this;this.currentSlideCount+=this.originalSlideCount,this.updateWidth(),[].forEach.call(this.originalSlideWrappers,function(t){e.moveableStage.appendChild(t.cloneNode(!0))})}},{key:"updateSlide",value:function(e){var t=this.getCurrentOffset(),i=this.window.getComputedStyle(this.$elm).width.match(/^([0-9]+)px/),n=this.window.parseInt(i[1],10),s=void 0;"previous"===e?(this.currentSlide-=1,s=t+n):(this.currentSlide+=1,s=t-n),r.updateElementTranslate(this.moveableStage,[s+"px",0])}},{key:"getCurrentOffset",value:function(){var e=this.moveableStage.style.transform.match(/translate\((.*)px,[^)]+\)/);return e?this.window.parseInt(e[1],10):0}},{key:"updateControlPanel",value:function(e){this.hideInvalidButtonChoice(e),this.updateActiveSwitch(e)}},{key:"hideInvalidButtonChoice",value:function(e){this.buttons.previous.classList.remove("hidden"),this.buttons.next.classList.remove("hidden");var t=this.getLogicalSlideNumber(e);1===t?this.buttons.previous.classList.add("hidden"):t===this.originalSlideCount&&this.buttons.next.classList.add("hidden")}},{key:"updateActiveSwitch",value:function(e){var t=this.getLogicalSlideNumber(e);[].forEach.call(this.switches.querySelectorAll(".carousel__control--switch"),function(e,i){i===t-1?e.classList.add("active"):e.classList.remove("active")})}},{key:"getLogicalSlideNumber",value:function(e){var t=this.originalSlideCount,i=Math.ceil(e/t),n=t*i-(t-1);return e-n+1}},{key:"activateSwitch",value:function(e){var t=this.window.parseInt(e.target.querySelector("span").innerHTML,10),i=this.getLogicalSlideNumber(this.currentSlide),n=t-i;if(t!==i)for(var s=n<0?this.previous:this.next,r=0;r<Math.abs(n);r+=1)this.userInitiatedProgression(s)}},{key:"adjustTranslateForResize",value:function(){var e=window.getComputedStyle(this.$elm).width.match(/([0-9]+)px/)[1],t=this.currentSlide,i=(t-1)*e*-1;this.moveableStage.style.transform="translate("+i+"px, 0)"}},{key:"updateWidth",value:function(){this.moveableStage.style.width=r.adjustPxString(this.window.getComputedStyle(this.$elm).width,this.currentSlideCount,"multiply")}}]),e}()},{"../libs/elife-utils":16}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.window=i,this.doc=s,this.$elm=t,this.$elm.classList.add("content-header-article--js"),this.breakpointInPx=768,this.currentView=this.calcCurrentView(this.breakpointInPx),this.authors=t.querySelectorAll(".content-header__author_list_item"),this.institutions=t.querySelectorAll(".content-header__institution_list_item"),this.hasToggleAuthor=!1,this.hasToggleInstitution=!1,this.hideAllExcessItems("author",this.authors),this.hideAllExcessItems("institution",this.institutions);var r=this;this.window.addEventListener("resize",function(){var e=r.calcCurrentView(r.breakpointInPx);e!==r.currentView&&(r.currentView=e,r.handleAnyExcessItems("author",r.authors),r.handleAnyExcessItems("institution",r.institutions))})}}return s(e,[{key:"handleAnyExcessItems",value:function(e,t){var i=this.$elm.querySelector(".content-header__item_toggle");if(i&&i.innerHTML.indexOf("less")>-1&&"wide"===this.currentView)this.clearExcessMark(t),this.toggleExcessItems(t);else{this.clearExcessMark(t);var n=this.getExcessItems(e,t);this.markAsExcess(n),this.toggleExcessItems(t),this.markLastNonExcessItem(e,t)}}},{key:"hideAllExcessItems",value:function(e,t){var i=this.getExcessItems(e,t);this.markAsExcess(i),this.toggleExcessItems(t),this.addTrailingText(e,t)}},{key:"getDefaultMaxItems",value:function(e){if("wide"===this.currentView){if("author"===e)return 16;if("institution"===e)return 10}else{if("author"===e)return 1;if("institution"===e)return 0}return null}},{key:"getExcessItems",value:function(e,t){if("author"!==e&&"institution"!==e)return null;var i=this.getDefaultMaxItems(e);return t.length>i?[].slice.call(t,i):[]}},{key:"markAsExcess",value:function(e){e.forEach(function(e){e.classList.add("excess-item")})}},{key:"clearExcessMark",value:function(e){[].forEach.call(e,function(e){e.classList.remove("excess-item")})}},{key:"toggleExcessItems",value:function(e){[].forEach.call(e,function(e){e.classList.contains("excess-item")?e.classList.add("visuallyhidden"):e.classList.remove("visuallyhidden")})}},{key:"calcCurrentView",value:function(e){return this.window.matchMedia("(min-width: "+e+"px)").matches?"wide":"narrow"}},{key:"markLastNonExcessItem",value:function(e,t){var i=null,n=!1;if([].forEach.call(t,function(s,r){t[r].classList.remove("content-header__"+e+"--last-non-excess"),s.classList.contains("excess-item")&&!n&&(i=r-1,n=!0)}),null!==i&&i>-1){var s=t[i].querySelector(".content-header__"+e);s&&s.classList.add("content-header__"+e+"--last-non-excess")}}},{key:"addTrailingText",value:function(e,t){"author"===e&&t.length>this.getDefaultMaxItems("author")&&(this.hasToggleAuthor||(this.buildSeeMoreLessToggle("author"),this.hasToggleAuthor=!0)),"institution"===e&&t.length>this.getDefaultMaxItems("institution")&&(this.hasToggleInstitution||(this.buildSeeMoreLessToggle("institution"),this.hasToggleInstitution=!0)),this.markLastNonExcessItem(e,t)}},{key:"buildSeeMoreLessToggle",value:function(e){var t=this,i=this.doc.createElement("li"),n="see&nbsp;all",s="see&nbsp;less";i.setAttribute("aria-hidden","true"),i.classList.add("content-header__item_toggle","content-header__item_toggle--"+e),i.innerHTML="&nbsp;&hellip;&nbsp;"+n,i.addEventListener("click",function(e){var i=e.target;i.innerHTML.indexOf(n)>-1?([].forEach.call(t.doc.querySelectorAll(".content-header__item_toggle"),function(e){e.innerHTML="&nbsp;"+s}),t.clearExcessMark(t.authors),t.clearExcessMark(t.institutions),t.toggleExcessItems(t.authors),t.toggleExcessItems(t.institutions)):([].forEach.call(t.doc.querySelectorAll(".content-header__item_toggle"),function(e){e.innerHTML="&nbsp;&hellip;&nbsp;"+n}),t.hideAllExcessItems("author",t.authors),t.hideAllExcessItems("institution",t.institutions))}),this.$elm.querySelector(".content-header__"+e+"_list").appendChild(i)}}]),e}()},{}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.$elm=t,this.window=i,this.doc=s,this.window.addEventListener("DOMContentLoaded",this.handleDomLoad.bind(this))}return s(e,null,[{key:"isSingleton",value:function(){return!0}}]),s(e,[{key:"handleDomLoad",value:function(e){this.handleSectionOpeningViaHash(e),this.window.addEventListener("hashchange",this.handleSectionOpeningViaHash.bind(this))}},{key:"isIdOfOrWithinSection",value:function(e,t,i,n){if(e===t.id)return!0;var s=i.querySelector("#"+e);return n(t,s)}},{key:"getIdOfCollapsedSection",value:function(e,t,i){var n=this,s=t.querySelectorAll(".article-section--collapsed");if(!s)return null;var r=void 0;return[].forEach.call(s,function(s){r||n.isIdOfOrWithinSection(e,s,t,i)&&(r=s)}),r?r.id:null}},{key:"handleSectionOpeningViaHash",value:function(e){var t="";if(t=e.newURL?e.newURL.substring(e.newURL.indexOf("#")+1):this.window.location.hash.substring(1),!t)return!1;var i=this.getIdOfCollapsedSection(t,this.doc,r.areElementsNested);if(i){var n=void 0;try{n=new CustomEvent("expandsection",{detail:t})}catch(e){n=document.createEvent("expandsection"),n.initCustomEvent("expandsection",!0,!0,{detail:t})}this.doc.querySelector("#"+i).dispatchEvent(n)}}}]),e}()},{"../libs/elife-utils":16}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=i,this.doc=s,this.$elm=t)}return s(e,[{key:"moveWithinDom",value:function(){this.$elm.classList.add("main-menu--js");var e=this.doc.querySelector(".global-wrapper");e&&e.insertBefore(this.$elm,e.firstElementChild)}},{key:"isOpen",value:function(){return this.$elm.classList.contains("main-menu--shown")}},{key:"close",value:function(){this.$elm.classList.remove("main-menu--shown"),this.doc.querySelector(".global-wrapper").classList.remove("pull-offscreen-right")}},{key:"open",value:function(){this.$elm.classList.add("main-menu--shown"),this.doc.querySelector(".global-wrapper").classList.add("pull-offscreen-right")}}]),e}()},{}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.window=i,e.loadDependencies(s)}return s(e,null,[{key:"loadDependencies",value:function(t){e.dependenciesAlreadySetup(t)||(e.setupProperties(),e.load(t))}},{key:"dependenciesAlreadySetup",value:function(e){return!!e.querySelector('script[src*="mathjax"]')}},{key:"setupProperties",value:function(){window.MathJax={"HTML-CSS":{linebreaks:{automatic:!0,width:"75% container"}},SVG:{linebreaks:{automatic:!0,width:"75% container"}}}}},{key:"setupResizeHandler",value:function(){var e=void 0,t=function(){e||(e=setTimeout(function(){e=null,this.window.MathJax&&this.window.MathJax.Hub.Queue(["Rerender",this.window.MathJax.Hub])},300))};window.addEventListener("resize",t)}},{key:"load",value:function(t){var i=t.createElement("script");i.type="text/javascript",i.addEventListener("load",e.setupResizeHandler),i.src="https://cdn.mathjax.org/mathjax/2.7-latest/MathJax.js?config=MML_HTMLorMML",t.querySelector("body").appendChild(i)}}]),e}()},{}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return n(this,e),t?(console.log("Initialising Chapter listing item..."),this.$elm=t,this.startTime=t.dataset.startTime,void(!this.startTime||isNaN(this.startTime)||this.startTime<0||(this.window=i,this.document=s,i.addEventListener("playerReady",this.listenForChapterChange.bind(this)),this.$link=this.createLink(s,this.$elm,this.startTime),this.setupEventHandlers(this.$link)))):void console.warn("No element provided")}return s(e,[{key:"listenForChapterChange",value:function(e){var t=this.document.querySelector("#"+e.detail);
t&&t.addEventListener("chapterChanged",this.indicateChapterChanged.bind(this))}},{key:"createLink",value:function(e,t,i){var n=t.querySelector(".teaser__header_text");if(n){var s=void 0,r=void 0;try{r=n.querySelector(".teaser__header_text_link"),s=r.innerHTML,r.parentNode.removeChild(r)}catch(a){s=n.innerHTML}var o=e.createElement("a");return o.innerHTML=s,o.setAttribute("href","#"+i),o.classList.add("teaser__header_text_link"),n.innerHTML="",n.appendChild(o),o}}},{key:"indicateChapterChanged",value:function(e){var t=e.detail;t===this.window.parseInt(this.$elm.dataset.chapterNumber)?this.$elm.classList.add("current-chapter"):this.$elm.classList.remove("current-chapter")}},{key:"setupEventHandlers",value:function(e){e.addEventListener("chapterChanged",this.indicateChapterChanged)}}]),e}()},{}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,arguments.length>2&&void 0!==arguments[2]?arguments[2]:document);n(this,e),t&&(this.$container=t.querySelector("fieldset"),this.$form=t.querySelector("form"),this.$input=t.querySelector('input[type="search"]'),this.$limit=t.querySelector('input[type="checkbox"]'),this.$elm=t,this.$searchButton=t.querySelector('button[type="submit"]'),this.$resetButton=t.querySelector('button[type="reset"]'),this.$inner=t.querySelector(".search-box__inner"),this.$input&&(this.isSearchLimited=this.$limit&&this.$limit.checked,this.$elm.classList.add("search-box--js"),this.$form.setAttribute("autocomplete","off"),s.querySelector(".search-box__output")||(this.$output=s.createElement("div"),this.$output.innerHTML="",this.$output.classList.add("search-box__output"),this.$output.addEventListener("keyup",function(t){e.handleKeyEntry(t,i)}),this.$output.addEventListener("click",function(e){i.useSuggestion(e.target)}),this.$inner.appendChild(this.$output)),this.keywords=[],this.$resetButton.addEventListener("click",this.reset.bind(this)),this.$input.addEventListener("keyup",function(t){e.handleKeyEntry(t,i)}),this.$input.addEventListener("paste",this.showResetButton.bind(this)),e.setKeywords(["Xiao-Dong Li","Zhijian J Chen","Cell biology","Immunology","bacteria"],this)))}return s(e,[{key:"reset",value:function(){this.hideResetButton(),this.$output&&(this.$output.innerHTML=""),this.$input.focus()}},{key:"hideResetButton",value:function(){this.$elm.classList.remove("search-box--populated")}},{key:"showResetButton",value:function(){this.$elm.classList.add("search-box--populated")}},{key:"nextSuggestion",value:function(e){this.$output&&(e===this.$input?this.$output.querySelector("ul li:first-child").focus():e.nextElementSibling?e.nextElementSibling.focus():this.$input.focus())}},{key:"prevSuggestion",value:function(e){this.$output&&(e===this.$input?this.$output.querySelector("ul li:last-child").focus():e.previousElementSibling?e.previousElementSibling.focus():this.$input.focus())}},{key:"useSuggestion",value:function(e){this.$input.value=e.innerHTML.replace(/<\/?strong>/g,""),this.$output&&(this.$output.innerHTML="",this.$input.value.length&&this.$form.submit())}},{key:"filterKeywordsBySearchTerm",value:function(t,i){var n=void 0;if(i){n=t.filter(function(e){return e.toLowerCase().indexOf(i.toLowerCase())!==-1}),n.sort();for(var s=0;s<n.length;s+=1)n[s]=e.embolden(n[s],i)}return n}},{key:"display",value:function(e,t){var i="";t&&(t.innerHTML="",this.nudgeOutputVertically("-47px"),e&&e.length&&(e.forEach(function(e){i+='<li tabindex="0" class="search-box__suggestion">'+e+"</li>"}),i="<ul>"+i+"</ul>",t.innerHTML=i))}},{key:"nudgeOutputVertically",value:function(e){var t=void 0;"string"==typeof e&&e.indexOf("px")===e.length-2?t=e:isNaN(e)||(t=e+"px"),r.updateElementTranslate(this.$output,[0,t])}},{key:"toggleSearchLimiting",value:function(){this.isSearchLimited=!this.isSearchLimited}}],[{key:"handleKeyEntry",value:function(t,i){var n=t.target;if(t.keyCode&&9!==t.keyCode)switch(t.keyCode){case 40:i.nextSuggestion(n);break;case 38:i.prevSuggestion(n);break;case 13:i.useSuggestion(n);break;default:i.display(i.filterKeywordsBySearchTerm(e.getKeywords(i),i.$input.value),i.$output),i.$input.value.length>0?i.showResetButton():i.hideResetButton()}}},{key:"getKeywords",value:function(e){return e.keywords}},{key:"setKeywords",value:function(e,t){t.keywords=e}},{key:"embolden",value:function(e,t){if(t.indexOf("<strong>")>-1)return e;var i=new RegExp(t,"i"),n=e.match(i)?e.match(i)[0]:null;return n?e.replace(n,"<strong>"+n+"</strong>"):e}}]),e}()},{"../libs/elife-utils":16}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){n(this,e),t&&(this.$elm=t,this.$elm.classList.add("select-nav--js"),this.$elm.querySelector("select").addEventListener("change",this.triggerSubmit.bind(this)))}return s(e,[{key:"triggerSubmit",value:function(){this.$elm.submit()}}]),e}()},{}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function t(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,t),i){this.$elm=i,this.window=s,this.doc=r;var a=e("./SearchBox"),o=i.querySelector('[data-behaviour="SearchBox"]');this.searchBox=new a(o,this.window,r);var l=i.querySelector('[rel="search"]');l&&(this.searchToggle=l.parentNode,this.searchToggle.addEventListener("click",this.toggleSearchBox.bind(this))),this.$pageOverlay=null;var u=r.querySelector("#mainMenu");if(u){var c=e("./MainMenu");this.mainMenu=new c(u),this.$mainMenuToggle=this.$elm.querySelector('a[href="#mainMenu"]'),this.$mainMenuToggle&&(this.mainMenu.moveWithinDom(),this.$mainMenuToggle.addEventListener("click",this.toggleMainMenu.bind(this)))}}}return s(t,[{key:"toggleMainMenu",value:function(e){this.mainMenu.isOpen()?(this.mainMenu.close(),this.window.removeEventListener("keyup",this.checkForMenuClose.bind(this)),this.doc.querySelector(".global-inner").removeEventListener("click",this.checkForMenuClose.bind(this))):(this.mainMenu.open(),this.window.addEventListener("keyup",this.checkForMenuClose.bind(this)),this.doc.querySelector(".global-inner").addEventListener("click",this.checkForMenuClose.bind(this))),e.preventDefault(),e.stopPropagation()}},{key:"checkForMenuClose",value:function(e){27!==e.keyCode&&"click"!==e.type||this.mainMenu.close()}},{key:"toggleSearchBox",value:function(e){e.preventDefault(),e.stopPropagation(),this.searchBoxIsOpen()?this.closeSearchBox():this.openSearchBox()}},{key:"searchBoxIsOpen",value:function(){return this.searchBox.$elm.classList.contains("search-box--shown")}},{key:"closeSearchBox",value:function(){this.searchBox.$elm.classList.remove("search-box--shown"),r.updateElementTranslate(this.searchBox.$elm,[0,"-40px"]),this.searchBox.$output&&(this.searchBox.$output.innerHTML=""),this.searchBox.$input.blur(),this.window.removeEventListener("keyup",this.checkForClose.bind(this)),this.window.removeEventListener("click",this.checkForClose.bind(this)),this.hidePageOverlay()}},{key:"checkForClose",value:function(e){(e.keyCode&&27===e.keyCode||"click"===e.type&&!r.areElementsNested(this.searchBox.$elm,e.target))&&this.closeSearchBox()}},{key:"openSearchBox",value:function(){var e=this,t=this.window.getComputedStyle(this.$elm).height,i=20,n=r.adjustPxString(t,i,"add"),s=150;r.updateElementTranslate(this.searchBox.$elm,[0,n]),r.invertPxString(this.window.getComputedStyle(this.searchBox.$container).height),this.searchBox.$elm.classList.add("search-box--shown"),this.window.addEventListener("keyup",this.checkForClose.bind(this)),this.window.addEventListener("click",this.checkForClose.bind(this)),this.window.setTimeout(function(){e.searchBox.$input.blur(),e.searchBox.$input.focus()},s),this.showPageOverlay()}},{key:"createPageOverlay",value:function(){var e="overlay--semi-white";this.$pageOverlay||(this.$pageOverlay=this.doc.createElement("div"),this.$pageOverlay.classList.add(e));var t=this.doc.querySelector(".global-inner");t.insertBefore(this.$pageOverlay,this.doc.querySelector(".site-header").nextElementSibling)}},{key:"showPageOverlay",value:function(){this.$pageOverlay||this.createPageOverlay(),this.$pageOverlay.style.display="block",this.$pageOverlay.style.height=this.doc.querySelector(".global-inner").getBoundingClientRect().height+"px"}},{key:"hidePageOverlay",value:function(){this.$pageOverlay.style.display="none"}}]),t}()},{"../libs/elife-utils":16,"./MainMenu":8,"./SearchBox":11}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.window=i,this.doc=s,this.$elm=t,this.$jumpLinks=this.$elm.querySelector(".view-selector__jump_links"),this.$jumpLinksToggle=this.$elm.querySelector(".view-selector__jump_links_header"),this.cssFixedClassName="view-selector--fixed",this.mainTarget=this.doc.querySelector('[role="main"]');var r=30;this.elmYOffset=this.$elm.offsetTop-r,this.window.addEventListener("scroll",this.handleScroll.bind(this)),this.$jumpLinksToggle.addEventListener("click",this.toggleJumpLinks.bind(this)),this.toggleJumpLinks()}}return s(e,[{key:"handleScroll",value:function(){if(this.$elm.classList.contains(this.cssFixedClassName)){if(this.window.pageYOffset<this.elmYOffset)return void this.$elm.classList.remove(this.cssFixedClassName);var e=this.mainTarget.getBoundingClientRect().bottom;if(e<this.$elm.offsetHeight){var t=e-this.$elm.offsetHeight;return void(this.$elm.style.top=t+"px")}return void(e>=this.window.innerHeight&&(this.$elm.style.top="0px"))}this.window.pageYOffset>=this.elmYOffset&&(this.$elm.classList.add(this.cssFixedClassName),this.$elm.style.top="0px")}},{key:"toggleJumpLinks",value:function(){this.$jumpLinks.classList.toggle("visuallyhidden"),this.$jumpLinksToggle.classList.toggle("view-selector__jump_links_header--closed"),this.handleScroll()}}]),e}()},{}],15:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){n(this,e),this.$elm=t,this.$prev=document.createElement("div"),this.$next=document.createElement("div"),this.build(),this.$prev.addEventListener("click",this.prev),this.$next.addEventListener("click",this.next)}return s(e,[{key:"build",value:function(){}},{key:"prev",value:function(e){e.preventDefault()}},{key:"next",value:function(e){e.preventDefault()}},{key:"close",value:function(){}}]),e}()},{}],16:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(e,t,i,n,s){var r=document.createElement(e),a="string"==typeof n?document.querySelector(n):n,o=function(){if(s){if("boolean"==typeof s)return a.firstElementChild;if("string"==typeof s)return document.querySelector(s);if(s instanceof HTMLElement)return s}}();return Array.isArray(t)&&t.forEach(function(e){r.classList.add(e)}),i&&(r.innerHTML=i),a&&(o?a.insertBefore(r,o):a.appendChild(r)),r}function t(e,t){function i(e){return e?"number"==typeof e?e+"px":"string"==typeof e?(e+="px",e.replace(/((px)+)$/,"px")):void 0:"0px"}if(!(e instanceof HTMLElement&&Array.isArray(t)))return!1;var n=i(t[0]),s=i(t[1]),r=["webkitTransform","mozTransform","msTransform","oTransform","transform"];r.forEach(function(t){void 0!==e.style[t]&&(e.style[t]="translate("+n+", "+s+")")})}function i(e){return"0"===e?0:parseInt(e.match(/([-0-9.]+)px/)[1],10)}function r(e){return 0===e?""+e:e+"px"}function a(e,t,n){var s=i(e),a=s,o="add";switch(["subtract","multiply","divide"].indexOf(n)>-1&&(o=n),o){case"add":a=s+t;break;case"subtract":a=s-t;break;case"multiply":a=s*t;break;case"divide":a=s/t}return r(a)}function o(e){var t=i(e),n=t*-1;return r(n)}function l(e,t){if(!(e instanceof Node&&t instanceof Node))return!1;var i=e.compareDocumentPosition(t);return!!(i&e.DOCUMENT_POSITION_CONTAINED_BY||0===i)}function u(e){return!!e.devicePixelRatio&&e.devicePixelRatio>=2}var c=function(){var e=function(){function e(){n(this,e),this.used=[]}return s(e,[{key:"isValid",value:function(e,t){return!(this.used.indexOf(e)>-1)&&!(t&&t.querySelector&&"function"==typeof t.querySelector&&t.querySelector("#"+e))}},{key:"get",value:function(e,t){var i=""+e||"default_",n=(""+Math.random()).replace(/\./,""),s=i+n;return this.isValid(s,t)?(this.used.push(s),s):void this.get(e,t)}}]),e}();return new e}();return{adjustPxString:a,areElementsNested:l,buildElement:e,invertPxString:o,isHighDpr:u,uniqueIds:c,updateElementTranslate:t}}},{}],17:[function(e,t,i){"use strict";window.localStorage&&document.querySelector&&window.addEventListener&&document.createElement("div").classList&&!function(){document.querySelector("html").classList.add("js");var t={};t.ArticleDownloadLinksList=e("./components/ArticleDownloadLinksList"),t.ArticleSection=e("./components/ArticleSection"),t.AudioPlayer=e("./components/AudioPlayer"),t.BackgroundImage=e("./components/BackgroundImage"),t.Carousel=e("./components/Carousel"),t.ContentHeaderArticle=e("./components/ContentHeaderArticle"),t.FragmentHandler=e("./components/FragmentHandler"),t.MainMenu=e("./components/MainMenu"),t.Math=e("./components/Math"),t.MediaChapterListingItem=e("./components/MediaChapterListingItem"),t.SearchBox=e("./components/SearchBox"),t.SelectNav=e("./components/SelectNav"),t.SiteHeader=e("./components/SiteHeader"),t.ViewerModal=e("./components/ViewerModal"),t.ViewSelector=e("./components/ViewSelector");var i=function(){function e(e){for(var n=e.getAttribute("data-behaviour").trim().split(" "),s=0;s<n.length;s+=1){var r=n[s];i.isRegistered(r)||(t[r]&&"function"==typeof t[r]&&new t[r](e,window,window.document),"function"==typeof t[r].isSingleton&&t[r].isSingleton()&&i.register(r))}}var i=function(){function e(e){return i.indexOf(e)>-1}function t(e){i.push(e)}var i=[];return{isRegistered:e,register:t}}(),n=document.querySelectorAll("[data-behaviour]");n&&[].forEach.call(n,e)};new i}()},{"./components/ArticleDownloadLinksList":1,"./components/ArticleSection":2,"./components/AudioPlayer":3,"./components/BackgroundImage":4,"./components/Carousel":5,"./components/ContentHeaderArticle":6,"./components/FragmentHandler":7,"./components/MainMenu":8,"./components/Math":9,"./components/MediaChapterListingItem":10,"./components/SearchBox":11,"./components/SelectNav":12,"./components/SiteHeader":13,"./components/ViewSelector":14,"./components/ViewerModal":15}]},{},[17]);
//# sourceMappingURL=main.js.map
