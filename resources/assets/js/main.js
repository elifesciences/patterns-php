!function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,o),e&&(this.$elm=e,this.window=t,this.doc=i,this.$elm.classList.add("grid-listing"),this.$elm.classList.add("clearfix"),[].forEach.call(this.$elm.querySelectorAll("li"),function(e){e.classList.add("grid-listing-item")}))}},{}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.$elm=t,this.window=i,this.doc=o,this.createLink(this.$elm.dataset.inContextUri),this.$elm.dataset.isReply&&this.showAsReply("View the full conversation"))}return o(e,[{key:"createLink",value:function(e){if(e&&"string"==typeof e){var t=r.buildElement("a",["annotation-teaser__link"]),i=[].slice.call(this.$elm.childNodes);[].forEach.call(i,function(e){t.appendChild(e)}),t.setAttribute("href",e),this.$elm.appendChild(t)}}},{key:"showAsReply",value:function(e){if(e&&"string"==typeof e){var t=this.$elm.querySelector(".annotation-teaser__reply");r.buildElement("span",["annotation-teaser__reply_cta"],e,t)}}}]),e}()},{"../libs/elife-utils":45}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=i,this.doc=o,this.$elm=t,this.$buttonWrapper=this.doc.querySelector(".side-section-wrapper__list")||this.doc.querySelector(".button-collection--inline"),this.$buttonWrapper&&(this.$downloadLink=this.$buttonWrapper.querySelector(".side-section-wrapper__download_link")||this.doc.getElementById("button-action-download"),this.$downloadLink&&(this.$elm.classList.add("article-download-links-list--js"),this.$elm.classList.add("visuallyhidden"),this.$elm.setAttribute("aria-expanded","false"),this.hideJsExcludes(),this.$toggler=this.doc.querySelector(".side-section-wrapper__download_link")||this.doc.getElementById("button-action-download"),this.moveList(),this.$toggler.addEventListener("click",this.toggle.bind(this)))))}return o(e,[{key:"hideJsExcludes",value:function(){[].forEach.call(this.$elm.querySelectorAll(".article-download-links-list__group--js-exclude"),function(e){e.classList.add("visuallyhidden")})}},{key:"moveList",value:function(){this.$elm.parentNode.parentNode.classList.add("visuallyhidden"),this.$toggler.after(this.$elm)}},{key:"toggle",value:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen()?this.close():this.open()}},{key:"isOpen",value:function(){return!this.$elm.classList.contains("visuallyhidden")}},{key:"open",value:function(){this.$elm.classList.remove("visuallyhidden"),this.$elm.setAttribute("aria-expanded","true"),this.window.addEventListener("click",this.checkForClose.bind(this))}},{key:"checkForClose",value:function(e){r.areElementsNested(this.$elm,e.target)||this.close()}},{key:"close",value:function(){this.$elm.classList.add("visuallyhidden"),this.$elm.setAttribute("aria-expanded","false"),this.window.removeEventListener("click",this.checkForClose.bind(this))}}]),e}()},{"../libs/elife-utils":45}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t.classList.contains("article-section--first")||(this.$elm=t,this.window=i,this.doc=o,this.viewportWidthSmall=600,this.viewportWidthLarge=1199,this.initialise(this.$elm,o))}return o(e,[{key:"initialise",value:function(e,t){this.$elm.classList.add("article-section--js"),this.$toggle=this.createToggle(e,t),this.$body=e.querySelector(".article-section__body"),this.setInitialState(e,this.$toggle,this.$body),this.$elm.addEventListener("expandsection",this.expand.bind(this)),this.$elm.addEventListener("collapsesection",this.collapse.bind(this))}},{key:"createToggle",value:function(e,t){var i=e.querySelector(".article-section__header"),n=t.createElement("A");return n.setAttribute("href","#"),n.classList.add("article-section__toggle"),n.appendChild(i.firstElementChild),i.appendChild(n),n.addEventListener("click",this.toggleState.bind(this)),n}},{key:"setInitialState",value:function(e,t,i){var n="";this.window.location&&this.window.location.hash&&(n=this.window.location.hash.substring(1)),this.window.navigator.userAgent&&this.window.navigator.userAgent.indexOf("Googlebot/")!==-1?e.dataset.initialState="opened":this.doc.referrer&&this.doc.referrer.indexOf(".google.")!==-1?e.dataset.initialState="opened":n&&r.isIdOfOrWithinSection(n,e,this.doc)?e.dataset.initialState="opened":this.viewportNoWiderThan(this.viewportWidthLarge)?this.viewportNoWiderThan(this.viewportWidthSmall)&&(e.dataset.initialState="closed"):e.dataset.initialState="opened","closed"===e.dataset.initialState?(e.classList.add("article-section--collapsed"),t.classList.add("article-section__toggle--closed"),i.classList.add("visuallyhidden")):(t.classList.remove("article-section__toggle--closed"),i.classList.remove("visuallyhidden"))}},{key:"viewportNoWiderThan",value:function(e){return this.window.matchMedia("(max-width: "+e+"px)").matches}},{key:"toggleState",value:function(e){e.preventDefault(),this.$toggle.classList.contains("article-section__toggle--closed")?this.$elm.dispatchEvent(r.eventCreator("expandsection")):this.$elm.dispatchEvent(r.eventCreator("collapsesection"))}},{key:"collapse",value:function(){this.$toggle.classList.add("article-section__toggle--closed"),this.$elm.classList.add("article-section--collapsed"),this.$body.classList.add("visuallyhidden")}},{key:"expand",value:function(e){this.$toggle.classList.remove("article-section__toggle--closed"),this.$elm.classList.remove("article-section--collapsed"),this.$body.classList.remove("visuallyhidden"),this.window.MathJax&&this.window.MathJax.Hub&&this.window.MathJax.Hub.Queue(["Rerender",this.window.MathJax.Hub,this.$elm.id]);try{if(0!==e.detail.search(/https?:\/\//)){var t=this.doc.getElementById(e.detail);t&&t.scrollIntoView()}}catch(i){}}}]),e}()},{"../libs/elife-utils":45}],5:[function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;o(this,e),this.$elm=t,this.window=r,this.doc=a,this.assetItems=[];var l=void 0,c=this.$elm.querySelector(".asset-viewer-inline__header_link");l=c?s.remoteDoc(c.href,this.window).then(function(e){var t=e.querySelector("#"+i.$elm.id);if(!t)return[i.$elm];var n=e.querySelectorAll('[data-parent-asset-id="'+i.$elm.id+'"]'),o=t.dataset.behaviour.trim().split(" "),r=o.indexOf("AssetNavigation");o.splice(r,1),t.dataset.behaviour=o.join(" "),i.$elm.parentNode.replaceChild(t,i.$elm),i.$elm=t;var s=[i.$elm],a=!0,l=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var h=u.value;s.push(h),i.$elm.parentNode.insertBefore(h,i.$elm.nextSibling)}}catch(f){l=!0,c=f}finally{try{!a&&d["return"]&&d["return"]()}finally{if(l)throw c}}return s}):Promise.resolve().then(function(){return[i.$elm].concat(n(i.findSupplements()))}),l=l.then(function(e){i.assetItems=e,i.assetItems.length>1&&!function(){var e=i.window.location.hash.substring(1),t=0;[].forEach.call(i.assetItems,function(n,o){var r=s.buildElement("div",["asset-viewer-inline__header_navigation"],"",n.querySelector(".asset-viewer-inline__header_panel"),".asset-viewer-inline__header_text");n.id===e&&(t=o),i.addPreviousButton(o,r),i.addNextButton(o,r),n.addEventListener("assetViewerFocus",function(){return i.show(o)})}),i.show(t),i.window.addEventListener("hashchange",i.hashChange.bind(i))}()})}return r(e,[{key:"addPreviousButton",value:function(e,t){var i=this,n=s.buildElement("span",["asset-viewer-inline__previous"],"",t);e>0&&(n.addEventListener("click",function(){i.window.history.pushState(null,"","#"+i.assetItems[e-1].id),i.show(e-1)}),n.classList.add("asset-viewer-inline__previous--active"))}},{key:"addNextButton",value:function(e,t){var i=this,n=s.buildElement("span",["asset-viewer-inline__next"],"",t);e<this.assetItems.length-1&&(n.addEventListener("click",function(){i.window.history.pushState(null,"","#"+i.assetItems[e+1].id),i.show(e+1)}),n.classList.add("asset-viewer-inline__next--active"))}},{key:"hideAll",value:function(){[].forEach.call(this.assetItems,function(e){return e.classList.add("visuallyhidden")})}},{key:"show",value:function(e){this.hideAll(),this.assetItems[e].classList.remove("visuallyhidden")}},{key:"findSupplements",value:function(){return this.doc.querySelectorAll('[data-parent-asset-id="'+this.$elm.id+'"]')}},{key:"hashChange",value:function(e){var t=this,i="";return!!(i=e.newURL?e.newURL.substring(e.newURL.indexOf("#")+1):this.window.location.hash.substring(1))&&void[].forEach.call(this.assetItems,function(e,n){e.id===i&&(t.show(n),e.scrollIntoView())})}}]),e}()},{"../libs/elife-utils":45}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.$elm=t,this.window=i,this.doc=o,this.$elm.querySelector(".asset-viewer-inline__open_link")&&this.setup(o)}return o(e,[{key:"handleClick",value:function(e){var t=this;e.preventDefault();var i=[],n=0,o=this.findAssets();[].forEach.call(o,function(e,o){var r=e.querySelector(".caption-text__heading"),s={src:e.dataset.assetViewerUri,w:e.dataset.assetViewerWidth,h:e.dataset.assetViewerHeight};r&&(s.title=r.innerHTML),i.push(s),e.id===t.$elm.id&&(n=o)});var s={index:n,history:!1,shareEl:!1},a=new PhotoSwipe(document.querySelector(".pswp"),PhotoSwipeUI_Default,i,s);a.init(),a.listen("beforeChange",function(){var e=t.findAssets()[a.getCurrentIndex()],i=r.eventCreator("assetViewerFocus");e.dispatchEvent(i)})}},{key:"findAssets",value:function(){return this.doc.querySelectorAll('[data-asset-viewer-group="'+this.$elm.dataset.assetViewerGroup+'"]')}},{key:"setup",value:function(t){var i=this;e.load(t).then(function(){var e=i.$elm.querySelector(".captioned-asset__link"),t=i.$elm.querySelector(".asset-viewer-inline__open_link");e&&e.addEventListener("click",i.handleClick.bind(i)),t&&t.addEventListener("click",i.handleClick.bind(i))})}}],[{key:"load",value:function(e){if(!this.loader){this.loader=Promise.all([r.loadJavaScript("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js","sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy"),r.loadJavaScript("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js","sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q"),r.loadStyleSheet("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.css","sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh"),r.loadStyleSheet("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.css","sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R")]);var t=document.createElement("div");t.className="pswp",t.tabIndex="-1",t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.innerHTML='\n<div class="pswp__bg"></div>\n<div class="pswp__scroll-wrap">\n    <div class="pswp__container">\n        <div class="pswp__item"></div>\n        <div class="pswp__item"></div>\n        <div class="pswp__item"></div>\n    </div>\n    <div class="pswp__ui pswp__ui--hidden">\n        <div class="pswp__top-bar">\n            <div class="pswp__counter"></div>\n            <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n            <button class="pswp__button pswp__button--share" title="Share"></button>\n            <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n            <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n            <div class="pswp__preloader">\n                <div class="pswp__preloader__icn">\n                  <div class="pswp__preloader__cut">\n                    <div class="pswp__preloader__donut"></div>\n                  </div>\n                </div>\n            </div>\n        </div>\n        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n            <div class="pswp__share-tooltip"></div>\n        </div>\n        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>\n        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>\n        <div class="pswp__caption">\n            <div class="pswp__caption__center"></div>\n        </div>\n    </div>\n</div>\n',e.body.appendChild(t)}return this.loader}}]),e}()},{"../libs/elife-utils":45}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return n(this,e),t?(this.window=o,this.window.HTMLAudioElement?(console.log("Initialising Audio Player..."),this.$elm=t,this.$audioElement=this.$elm.querySelector("audio"),this.$audioElement?(this.uniqueId=r.uniqueIds.get("audio",s),this.$elm.id=this.uniqueId,this.$playButton=e.buildPlayButton(this),this.$title=this.prepare$title(this.$elm.querySelector(".audio-player__header"),s),this.$progressTrack=e.buildProgressIndicator(this),this.$progressBar=this.$progressTrack.querySelector('[class*="progress_bar"]'),this.$timeIndicators=e.buildTimeIndicators(this),this.$currentTime=this.$timeIndicators.querySelector('[class*="current_time"]'),this.$duration=this.$timeIndicators.querySelector('[class*="duration"]'),this.duration=null,this.isPlaying=!1,this.$elm.classList.add("audio-player--js"),this.$playButton.classList.add("loading"),this.isPlayerReady=!1,this.$audioElement.addEventListener("loadedmetadata",function(){i.playerReady(i)}),this.$audioElement.readyState>=2&&this.playerReady(this),this.usingMetadata=!1,void this.loadMetadata(this.$elm.dataset.episodeNumber)):void console.warn("No audio element found")):void console.warn("Audio element not supported")):void console.warn("No element provided")}return o(e,[{key:"playerReady",value:function t(i){if(!this.isPlayerReady){this.isPlayerReady=!0,i.duration=i.$audioElement.duration,i.$duration.innerHTML=e.secondsToMinutes(i.duration),i.$playButton.addEventListener("click",function(){i.togglePlay(i.$audioElement,i.$playButton)},!1),i.$audioElement.addEventListener("timeupdate",i.update.bind(i)),i.window.addEventListener("hashchange",i.seekNewTime.bind(i)),i.window.addEventListener("load",i.seekNewTime.bind(i)),this.$playButton.classList.remove("loading");var t=void 0;try{t=new CustomEvent("playerReady",{detail:this.uniqueId})}catch(n){t=document.createEvent("playerReady"),t.initCustomEvent("playerReady",!0,!0,{detail:this.uniqueId})}i.window.dispatchEvent(t)}}},{key:"prepare$title",value:function(e,t){var i=t.createElement("span");try{i.innerHTML=e.innerHTML}catch(n){return}i.classList.add("audio-player__title"),e.innerHTML="",e.appendChild(i);var o=i.querySelector(".audio-player__header-link");return o?(this.$titleLink=o,o):i}},{key:"togglePlay",value:function(e,t){this.isPlaying?this.pause(e,t):this.play(e,t)}},{key:"play",value:function(e,t){e.play(),t.classList.add("audio-player__toggle_play--pauseable"),t.classList.remove("audio-player__toggle_play--playable"),t.innerHTML="Pause",this.isPlaying=!0}},{key:"pause",value:function(e,t){e.pause(),t.classList.add("audio-player__toggle_play--playable"),t.classList.remove("audio-player__toggle_play--pauseable"),t.innerHTML="Play",this.isPlaying=!1}},{key:"update",value:function(){var t=Math.floor(this.$audioElement.currentTime),i=t/this.duration*100,n=e.secondsToMinutes(t);if(this.$progressBar.style.width=i+"%",this.$currentTime.innerHTML=n,this.$titleLink&&(this.$titleLink.hash=t),this.usingMetadata){var o=this.getCurrentChapterNumber();this.setCurrentChapterMetadata(this.getChapterMetadataAtTime(t,this.chapterMetadata)),this.getCurrentChapterMetadata().number!==o&&this.changeChapter(this.getCurrentChapterNumber(),this.getCurrentChapterMetadata().title,this.$elm)}this.$audioElement.ended&&(this.$playButton.classList.add("audio-player__toggle_play--playable"),this.$playButton.classList.remove("audio-player__toggle_play--pauseable"),this.$playButton.innerHTML="Play",this.isPlaying=!1)}},{key:"changeChapter",value:function(e,t,i){this.setTitle(this.episodeTitle,t);var n=void 0;try{n=new CustomEvent("chapterChanged",{detail:e})}catch(o){n=document.createEvent("chapterChanged"),n.initCustomEvent("chapterChanged",!0,!0,{detail:e})}i.dispatchEvent(n)}},{key:"seekNewTime",value:function(e){var t,i=!1;try{t=e.newURL.substring(e.newURL.indexOf("#")+1),i=!0}catch(e){t=this.window.location.hash.substring(1),i=!1}!isNaN(t)&&t>=0&&(this.seek(t,this.$audioElement),!this.isPlaying&&i&&this.play(this.$audioElement,this.$playButton))}},{key:"handleSeek",value:function(e,t){var i=parseInt(e.offsetX,10),n=t.$progressTrack.clientWidth,o=i/parseInt(n,10);this.seek(o*t.duration,t.$audioElement)}},{key:"seek",value:function(e,t){t.currentTime=e,this.update()}},{key:"setTitle",value:function(e,t){this.title=e,t&&(this.title+=": "+t),this.$title.innerHTML=this.title}},{key:"getCurrentChapterMetadata",value:function(){return this.currentChapterMetadata}},{key:"setCurrentChapterMetadata",value:function(e){this.currentChapterMetadata=e}},{key:"getCurrentChapterNumber",value:function(){return this.getCurrentChapterMetadata().number||0}},{key:"getChapterMetadataAtTime",value:function(e,t){if(!t)return"";var i="",n=0;return t.forEach(function(t,o,r){var s=parseInt(t.time,10),a=o<r.length-1?r[o+1].time:null;e>=s&&(!a||e<a)&&(i=t.title,n=t.number)}),{title:i,number:n}}},{key:"processMetadata",value:function(e){this.episodeTitle="Episode "+e.number,this.setTitle(this.episodeTitle),this.chapterMetadata=this.prepareChapterMetadata(e),this.currentChapterMetadata={number:0,title:""}}},{key:"prepareChapterMetadata",value:function(e){var t=[];return e.chapters.forEach(function(e){t.push({time:e.time,number:e.number,title:e.number+". "+e.title})}),t}},{key:"loadMetadata",value:function(){try{this.processMetadata(JSON.parse(this.$elm.dataset.metadata.replace(/'/g,'"'))),this.usingMetadata=!0}catch(e){console.error(e),this.usingMetadata=!1}}}],[{key:"secondsToMinutes",value:function(e){var t=parseInt(e,10),i=Math.floor(t/60),n=t%60;return n<=9&&(n="0"+n),i+":"+n}},{key:"buildProgressIndicator",value:function(e){var t=r.buildElement("div",["audio-player__progress"],"","#"+e.uniqueId+' [class*="audio-player__container"]');return r.buildElement("div",["audio-player__progress_bar"],"",t),t.addEventListener("click",function(t){e.handleSeek(t,e)},!1),t}},{key:"buildPlayButton",value:function(e){return r.buildElement("button",["audio-player__toggle_play"],"Play","#"+e.uniqueId+' [class*="audio-player"]',!0)}},{key:"buildTimeIndicators",value:function(e){var t=e.uniqueId,i=r.buildElement("div",["audio-player__times"],"","#"+t+" [class*=audio-player__header]",!0);return r.buildElement("span",["audio-player__current_time"],"0:00",i),r.buildElement("span",["audio-player__duration"],"0:00",i),i}}]),e}()},{"../libs/elife-utils":45}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=o,this.doc=r,this.$elm=t,this.authorLimits=[3,10],this.authors=t.querySelectorAll(".author_list_item"),this.institutions=t.querySelectorAll(".institution_list_item"),this.authors.length>this.authorLimits[0]&&(this.authors[this.authors.length-1].classList.add("author_list_item--last"),this.$elm.classList.add("authors--collapsible"),this.addTrailingText("author",this.authors),this.authorLimits.map(function(e){e<i.authors.length&&i.$elm.classList.add("authors--limit-"+e)})),this.institutions.length>0&&this.institutions[this.institutions.length-1].classList.add("institution_list_item--last"),this.hasToggleInstitution=!1,this.hideAllExcessItems(),this.setupResizeHandler())}return o(e,[{key:"setupResizeHandler",value:function(){var e=this;this.currentClientWidth=document.body.getBoundingClientRect().width,this.window.addEventListener("resize",r.debounce(function(){return e.handleResize()},30))}},{key:"handleResize",value:function(){if(this.resizedClientWidth=document.body.getBoundingClientRect().width,this.currentClientWidth!==this.resizedClientWidth){this.currentClientWidth=this.resizedClientWidth,this.$elm.querySelector(".author_list--expanded")||this.hideAllExcessItems(),this.addTrailingText("author",this.authors);var e=this.$elm.querySelectorAll(".item_toggle .author_link_highlight"),t=this.getUpdatedToggleText.bind(this);[].forEach.call(e,function(e){e.innerHTML=t()})}}},{key:"hideExcessItems",value:function(e,t){this.clearExcessMark(t),this.markAsExcess(this.getExcessItems(e,t)),this.toggleExcessItems(t),this.addTrailingText(e,t)}},{key:"getMaxItems",value:function(){return this.window.matchMedia("(min-width: 730px)").matches?9:1}},{key:"getAuthorsCount",value:function(){return this.window.matchMedia("(max-width: 729px)").matches&&this.authors.length>this.authorLimits[0]?this.authorLimits[0]:this.window.matchMedia("(min-width: 730px)").matches&&this.authors.length>this.authorLimits[1]?this.authorLimits[1]:this.authors.length}},{key:"getExcessItems",value:function(e,t){if("institution"!==e)return null;var i=this.getMaxItems();return t.length>i?[].slice.call(t,i):[]}},{key:"markAsExcess",value:function(e){e.forEach(function(e){e.classList.add("excess-item")})}},{key:"clearExcessMark",value:function(e){[].forEach.call(e,function(e){e.classList.remove("excess-item")})}},{key:"toggleExcessItems",value:function(e){[].forEach.call(e,function(e){e.classList.contains("excess-item")?e.classList.add("visuallyhidden"):e.classList.remove("visuallyhidden")})}},{key:"markLastNonExcessItem",value:function(e,t){var i=null,n=!1;if([].forEach.call(t,function(t,o){t.querySelector("."+e)&&(t.querySelector("."+e).classList.remove(e+"--last-non-excess"),t.classList.contains("excess-item")&&!n&&(i=o-1,n=!0))}),null!==i&&i>-1){var o=t[i].querySelector("."+e);o&&o.classList.add(e+"--last-non-excess")}}},{key:"addTrailingText",value:function(e,t){"author"===e&&(this.authorToggle=this.$elm.querySelector(".item_toggle--author"),this.expandedSeeMore=this.$elm.querySelector(".author_list--expanded"),t.length>this.getAuthorsCount()&&null===this.authorToggle?null!==this.expandedSeeMore?this.buildSeeMoreLessToggle("author","expanded"):this.buildSeeMoreLessToggle("author"):t.length<=this.getAuthorsCount()&&null!==this.authorToggle&&this.authorToggle.parentNode.removeChild(this.authorToggle)),"institution"===e&&t.length>this.getMaxItems()&&(this.hasToggleInstitution||(this.buildSeeMoreLessToggle("institution"),this.hasToggleInstitution=!0),this.markLastNonExcessItem(e,t))}},{key:"getToggleCollapsedText",value:function(){var e='<span class="visuallyhidden"> expand author list</span>';return this.window.matchMedia("(min-width: 730px)").matches?e+'<span aria-hidden="true">see&nbsp;all</span>':"et al."+e}},{key:"getToggleExpandedText",value:function(){var e='<span class="visuallyhidden"> collapse author list</span>';return e+'<span aria-hidden="true">see&nbsp;less</span>'}},{key:"getUpdatedToggleText",value:function(e){return"expanded"===e?this.getToggleExpandedText():"collapsed"===e?this.getToggleCollapsedText():this.$elm.querySelector(".item_toggle--expanded")?this.getToggleExpandedText():this.$elm.querySelector(".item_toggle--collapsed")?this.getToggleCollapsedText():void 0}},{key:"updateToggleState",value:function(e,t,i){"expanded"!==e&&"collapsed"!==e||(t.innerHTML=this.getUpdatedToggleText(e),t.parentNode.classList.toggle("item_toggle--expanded"),t.parentNode.classList.toggle("item_toggle--collapsed"),"expanded"===e?this.$elm.querySelector("."+i+"_list").classList.add(i+"_list--expanded"):this.$elm.querySelector("."+i+"_list").classList.remove(i+"_list--expanded"))}},{key:"buildSeeMoreLessToggle",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collapsed",n=r.buildElement("li",["item_toggle","item_toggle--"+i,"item_toggle--"+e],"",this.$elm.querySelector("."+e+"_list"));n.setAttribute("aria-hidden","true");var o=r.buildElement("button",["author_link_highlight"],this.getUpdatedToggleText(i),n),s=function(i){i.preventDefault();var n=i.currentTarget.parentNode,o=void 0;n.classList.contains("item_toggle--collapsed")?("institution"===e&&t.showAllItems(),o="expanded"):("institution"===e&&t.hideAllExcessItems(),o="collapsed"),t.updateToggleState(o,i.currentTarget,e)};o.addEventListener("click",s)}},{key:"showAllItems",value:function(){this.clearExcessMark(this.institutions),this.toggleExcessItems(this.institutions)}},{key:"hideAllExcessItems",value:function(){this.markLastNonExcessItem("institution",this.institutions),this.hideExcessItems("institution",this.institutions)}}]),e}()},{"../libs/elife-utils":45}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.$elm=t,this.window=o,this.doc=s,this.$elm.dataset.resetText=t.innerHTML;var a=r.closest(this.$elm,".modal");a&&a.addEventListener("modalWindowClose",function(){i.reset()}),this.$elm.addEventListener("click",function(){i.copyToClipboard(i.$elm.getAttribute("data-clipboard"),function(){i.$elm.classList.add("button--success"),i.$elm.textContent="Copied!"},function(){i.$elm.classList.add("button--fail"),i.$elm.disabled=!0,i.$elm.textContent="Copy not supported"})})}}return o(e,[{key:"supportsClipboardAPI",value:function(){return!!navigator.clipboard}},{key:"copyToClipboard",value:function(e,t,i){if(this.supportsClipboardAPI())navigator.clipboard.writeText(e).then(t)["catch"](i);else try{this.copyToClipboardFallback(e),t()}catch(n){i()}}},{key:"copyToClipboardFallback",value:function(e){var t=this.doc.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",this.doc.body.appendChild(t),t.focus(),t.select(),this.doc.execCommand("copy"),this.doc.body.removeChild(t)}},{key:"reset",value:function(){this.$elm.classList.remove("button--success","button--fail"),this.$elm.innerHTML=this.$elm.dataset.resetText}}]),e}()},{"../libs/elife-utils":45}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./_Dismissible");t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.$elm=t,this.window=o,this.doc=s,this.dismissible=new r(this.$elm,".call-to-action",this.doc);var a=this.$elm.querySelector(".call-to-action__button_wrapper");a.addEventListener("click",function(){return i.dismissible.dismiss()}),this.show()}return o(e,[{key:"show",value:function(){this.$elm.classList.add("call-to-action-wrapper--js-shown")}}]),e}()},{"./_Dismissible":44}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this;n(this,e),this.$elm=t;var o=this.$elm.dataset.checkAvailable,r=this.$elm.dataset.displayOnAvailable;this.checkPMC(o).then(function(e){e?(i.$elm.insertAdjacentHTML("beforebegin",r),i.$elm.remove()):i.$elm.parentNode.remove()})}return o(e,[{key:"checkPMC",value:function(e){
return r.loadData(e).then(function(e){return JSON.parse(e)}).then(function(e){return"pmcid"in e.records[0]})}}]),e}()},{"../libs/elife-utils":45}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.$elm=t,this.window=o,this.doc=s,this.cssStickyClassName="content-aside__sticky",this.prepareTimeline(this.$elm.querySelector(".definition-list--timeline")),this.prepareScrollable(this.$elm),this.window.addEventListener("load",function(){r.removeSeparatorFromLastOnLine(i.$elm,".contextual-data__item","no-separator")}),this.window.addEventListener("resize",function(){r.removeSeparatorFromLastOnLine(i.$elm,".contextual-data__item","no-separator")})}return o(e,[{key:"prepareTimeline",value:function(e){var t=this;if(null!==e){var i=e.parentNode,n=1,o=3,s=e.querySelectorAll("dt").length,a=function(e){e.preventDefault(),i.classList.toggle("toggle--expanded")},l=function(){var e=r.buildElement("a",["toggle"]);e.setAttribute("href","#"),i.appendChild(e),e.addEventListener("click",a.bind(t))};s>n&&(l(),s>o&&i.classList.add("toggle--count-gt-3"))}}},{key:"prepareScrollable",value:function(){var e=this;this.window.addEventListener("resize",function(){e.handleScrolling()}),this.window.addEventListener("scroll",function(){e.handleScrolling()})}},{key:"handleScrolling",value:function(){this.isViewportWide()&&(this.$elm.classList.add(this.cssStickyClassName),this.scrollbarWidth=this.$elm.offsetWidth-this.$elm.clientWidth,this.$elm.classList.remove(this.cssStickyClassName),this.yOffset=this.$elm.getBoundingClientRect().top+this.window.pageYOffset,this.window.pageYOffset>=this.yOffset?(this.$elm.classList.add(this.cssStickyClassName),this.$elm.style.marginRight=this.scrollbarWidth*-1+"px",this.$elm.style.paddingRight="4px"):(this.$elm.classList.remove(this.cssStickyClassName),this.$elm.style.marginRight=0,this.$elm.style.paddingRight=0))}},{key:"isViewportWide",value:function(){return this.window.matchMedia("(min-width: 1000px)").matches}}]),e}()},{"../libs/elife-utils":45}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){n(this,e);var i=t.getAttribute("data-delegate-behaviour"),o=t.querySelectorAll(t.getAttribute("data-selector")),r=t.getAttribute("data-delegate-behaviour-class");[].forEach.call(o,function(t){e.initialiseComponent(t,i),r&&t.classList.add(r)})}return o(e,null,[{key:"setInitialiseComponent",value:function(t){e.initialiseComponent=t}}]),e}()},{}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.$elm=t,this.window=i,this.doc=o,this.$button=t.querySelector("button"),this.$button.form&&(this.$button.classList.add("visuallyhidden"),e.setupEventListeners(e.findFilters(this.$elm))))}return o(e,null,[{key:"setupEventListeners",value:function(e){[].forEach.call(e,function(e){e.form&&e.addEventListener("change",function(){return e.form.submit()})})}},{key:"findFilters",value:function(e){return e.querySelectorAll('input[type="checkbox"]')}}]),e}()},{}],15:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.$elm=t,this.window=i,this.doc=o,this.isSingleton=!0,this.window.addEventListener("load",this.handleSectionOpeningViaHash.bind(this)),this.window.addEventListener("hashchange",this.handleSectionOpeningViaHash.bind(this))}return o(e,[{key:"getIdOfCollapsibleSection",value:function(e,t){var i=t.querySelectorAll(".article-section--js");if(!i.length)return null;var n=void 0;return[].forEach.call(i,function(i){n||r.isIdOfOrWithinSection(e,i,t)&&(n=i)}),n?n.id:null}},{key:"handleSectionOpeningViaHash",value:function(e){var t="";if(t=e.newURL?e.newURL.substring(e.newURL.indexOf("#")+1):this.window.location.hash.substring(1),!t)return!1;var i=this.getIdOfCollapsibleSection(t,this.doc);i&&this.doc.getElementById(i).dispatchEvent(r.eventCreator("expandsection",t))}}]),e}()},{"../libs/elife-utils":45}],16:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.$elm=t,this.window=o,this.doc=r;var s=t.getAttribute("data-checkbox-id"),a=void 0;if(s&&this.doc.getElementById(s))a=this.doc.getElementById(s);else{var l=this.buildCheckbox(this.$elm.querySelector("label").textContent,s);this.$elm.parentNode.insertBefore(l,this.$elm),a=l.querySelector("input")}a.addEventListener("change",function(e){i.toggleTextField(i.$elm,a,e)}),this.toggleTextField(this.$elm,a)}}return o(e,[{key:"toggleTextField",value:function(e,t,i){var n=e.querySelector("input");void 0===i&&""!==n.value?t.setAttribute("checked","checked"):void 0!==i&&i.target.checked?(e.classList.remove("visuallyhidden"),""===n.value&&n.focus()):(e.classList.add("visuallyhidden"),n.value="")}},{key:"buildCheckbox",value:function(e,t){var i=r.buildElement("label",["checkbox__item_label","hidden_until_checked__checkbox"]),n=r.buildElement("span",["checkbox__item"],e,i),o=r.buildElement("input",[],"",i,n);return o.setAttribute("type","checkbox"),void 0!==t&&o.setAttribute("id",t),i}}]),e}()},{"../libs/elife-utils":45}],17:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t instanceof HTMLElement&&(this.window=o,this.$elm=t,this.doc=s,this.tabletWidth=900,this.desktopWidth=1200,this.setCurrentSlide(1),this.timerInterval=1e4,this.$prevBtn=t.querySelector(".highlights__control--prev"),this.$nextBtn=t.querySelector(".highlights__control--next"),this.$prevBtn.addEventListener("click",this.previousButton.bind(this)),this.$nextBtn.addEventListener("click",this.nextButton.bind(this)),this.moveableStage=this.$elm.querySelector(".listing-list--highlights"),this.originalSlideWrappers=this.moveableStage.querySelectorAll(".listing-list__item"),this.numSlides=this.originalSlideWrappers.length,this.switchBreakpoint(),this.window.addEventListener("resize",r.debounce(function(){return i.switchBreakpoint()},150)),this.margin=2*this.calculateMargin(),this.$elm.addEventListener("keyup",this.checkTabPress.bind(this)))}return o(e,[{key:"calculateMargin",value:function(){var e=this.originalSlideWrappers[0],t=e.currentStyle||window.getComputedStyle(e);return parseInt(t.marginLeft,10)}},{key:"setCurrentSlide",value:function(e){this.currentSlide=e>this.maxOffset?this.maxOffset:e}},{key:"checkTabPress",value:function(e){if(e&&9===e.keyCode){var t=r.closest(document.activeElement,".listing-list__item");t&&(this.setCurrentSlide(r.getOrdinalAmongstSiblingElements(t)-1),this.renderCurrent())}}},{key:"isFirstSlide",value:function(){return 1===this.currentSlide}},{key:"isLastSlide",value:function(){return this.currentSlide===this.maxOffset}},{key:"previousButton",value:function(e){return e.preventDefault(),this.isFirstSlide()?null:(this.setCurrentSlide(this.currentSlide-1),void this.renderCurrent())}},{key:"nextButton",value:function(e){return e.preventDefault(),this.isLastSlide()?null:(this.setCurrentSlide(this.currentSlide+1),void this.renderCurrent())}},{key:"viewportNoWiderThan",value:function(e){return this.window.matchMedia("(max-width: "+e+"px)").matches}},{key:"onMobile",value:function(){return this.viewportNoWiderThan(this.tabletWidth)}},{key:"onTabletOrMobile",value:function(){return this.viewportNoWiderThan(this.desktopWidth)}},{key:"switchBreakpoint",value:function(){this.onMobile()?this.inView=1:this.onTabletOrMobile()?this.inView=2:this.inView=3,this.maxOffset=this.numSlides-(this.inView-1),this.margin=2*this.calculateMargin(),this.carouselWidth=window.getComputedStyle(this.$elm).width.match(/([0-9\.]+)px/)[1],this.setCurrentSlide(this.currentSlide),this.renderCurrent(),[].forEach.call(this.originalSlideWrappers,function(e){e.style.height="106px"})}},{key:"renderCurrent",value:function(){this.render(this.$elm,this.$nextBtn,this.$prevBtn,this.currentSlide,this.carouselWidth,this.inView)}},{key:"render",value:function(e,t,i,n,o,s){this.isFirstSlide()?i.classList.add("hidden"):i.classList.remove("hidden"),this.isLastSlide()?t.classList.add("hidden"):t.classList.remove("hidden");var a=s-1,l=a*this.margin,c=(o-l)/s,u=c+this.margin,d=u*(n-1)*-1;r.updateElementTranslate(this.moveableStage,[d,0]),e.scrollLeft=0}}]),e}()},{"../libs/elife-utils":45}],18:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.$elm=t,this.window=o,this.doc=r,this.isSingleton=!0;try{this.window.hypothesisConfig=e.assembleHypothesisConfig(this.window)}catch(s){return void this.window.console.error(s)}this.$embedder=this.doc.createElement("script"),this.$embedder.id="hypothesisEmbedder",this.$embedder.addEventListener("load",function(){i.setUpAssetViewerFocus(i.doc)}),this.$embedder.addEventListener("error",function(){i.handleLoadError(i.$embedder)}),this.doc.querySelector("head").appendChild(this.$embedder),this.$embedder.src="https://hypothes.is/embed.js"}}return o(e,[{key:"setUpAssetViewerFocus",value:function(e){e.addEventListener("scrolltorange",function(e){if(e.detail.startContainer){var t=e.detail.startContainer.closest(".asset-viewer-inline");t&&t.dispatchEvent(r.eventCreator("assetViewerFocus"))}})}},{key:"handleLoadError",value:function(e){e.dataset.hypothesisEmbedLoadStatus="failed",e.dispatchEvent(new this.window.ErrorEvent("loaderror",{message:"Hypothesis embed load failed"}))}}],[{key:"assembleHypothesisConfig",value:function(t){var i=t.elifeConfig.hypothesis;e.validateConfig(i);var n={branding:{accentColor:"#087acc",appBackgroundColor:"#fff",ctaBackgroundColor:"#087acc",ctaTextColor:"#fff",selectionFontFamily:"Georgia, Times, serif",annotationFontFamily:"Georgia, Times, serif"},openSidebar:"#annotations"===t.location.hash,disableToolbarCloseBtn:!1,disableToolbarMinimizeBtn:!0,disableToolbarHighlightsBtn:!0,disableToolbarNewNoteBtn:!0,disableBucketBar:!0,enableSidebarDropShadow:!0,enableExperimentalNewNoteButton:!0,enableCleanOnboardingTheme:!0,theme:"clean",showHighlights:!0,onLayoutChange:function(e){e.expanded&&r.expandCollapsedSections(document)}};return function(){return Object.assign({},n,i)}}},{key:"validateConfig",value:function(t){var i=t.services[0];if(e.validateAsUrl("usernameUrl",t.usernameUrl),e.validateAsUrl("apiUrl",i.apiUrl),e.validateAsPopulatedString("authority",i.authority),i.onLoginRequest&&i.onLogoutRequest||!i.onLoginRequest&&!i.onLogoutRequest)throw new Error('Hypothesis config generation failed: couldn\'t find exactly one of the properties "onLoginRequest" and "onLogoutRequest"');if(i.onLoginRequest&&i.onProfileRequest)throw new Error('Hypothesis config generation failed: found both mutually exclusive properties "onLoginRequest" and "onProfileRequest"');if(i.onLoginRequest&&!i.onSignupRequest&&e.failValidationMissingProperty("onSignupRequest"),i.onLoginRequest&&null!==i.grantToken)throw new Error('Hypothesis config generation failed: expected the property "grantToken" to be null, but it was not null');if(i.onLogoutRequest&&!i.onProfileRequest&&e.failValidationMissingProperty("onProfileRequest"),i.onLogoutRequest&&i.onSignupRequest)throw new Error('Hypothesis config generation failed: found both mutually exclusive properties "onLogoutRequest" and "onSignupRequest"');i.onLogoutRequest&&e.validateAsPopulatedString("grantToken",i.grantToken)}},{key:"validateAsUrl",value:function(t,i){e.isProbablyUrl(i)||e.failValidationMissingProperty(t)}},{key:"isProbablyUrl",value:function(e){return"string"==typeof e&&e.match(/^https?:\/\/.*$/)}},{key:"validateAsPopulatedString",value:function(t,i){"string"==typeof i&&i.length||e.failValidationMissingProperty(t)}},{key:"failValidationMissingProperty",value:function(e){throw new Error("Hypothesis config generation failed: couldn't find a valid property with the name \""+e+'"')}}]),e}()},{"../libs/elife-utils":45}],19:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../libs/elife-utils")(),a=e("./SpeechBubble");t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.$elm=t,this.window=i,this.doc=o,this.isWithinContextualData=s.areElementsNested(this.doc.querySelector(".contextual-data"),this.$elm),this.speechBubble=this.setupSpeechBubble(this.isWithinContextualData),this.setupPlacementAndStyles(this.isWithinContextualData);var r=null,a=null;try{a=e.get$hypothesisLoader(this.doc),r=this.setupPreReadyIndicatorsWithTimer(a)}catch(l){return this.window.console.error(l),void(a&&a instanceof HTMLElement&&a.parentNode.removeChild(a))}var c="[data-visible-annotation-count]";this.hookUpDataProvider(this.$elm,this.isWithinContextualData,c,r),this.$elm.dataset.hypothesisTrigger=""}}return r(e,[{key:"setupPreReadyIndicatorsWithTimer",value:function(t){var i=this;if(e.hasLoadAlreadyFailed(t))return void this.handleInitFail(null,this.window,!1);var n=12e4,o=this.window.setTimeout(this.handleTimerExpired.bind(this),n);return t.addEventListener("loaderror",function(e){i.handleInitFail(o,i.window,e)}),o}},{key:"handleInitFail",value:function(e,t,i){this.removeHypothesisUI(),this.speechBubble.showFailureState(this.isWithinContextualData);var n=t||this.window;if(n.clearTimeout(e),i!==!1){var o=void 0;o=i&&"string"==typeof i.message?i.message:"Problem loading or interacting with Hypothesis client.",this.window.console.error(new Error(o))}}},{key:"handleTimerExpired",value:function(){this.handleInitFail(null,this.window,new Error("Hypothesis loading timed out"))}},{key:"removeHypothesisUICounters",value:function(){var e=this.doc.querySelectorAll("[data-visible-annotation-count]");e&&[].forEach.call(e,function(e){var t=e.parentNode.parentNode.querySelector(".visuallyhidden");t.innerHTML="",delete e.dataset.visibleAnnotationCount})}},{key:"removeHypothesisUISidebar",value:function(){var e=this.doc.querySelector(".annotator-frame");e&&e.parentElement.removeChild(e)}},{key:"removeHypothesisUITriggers",value:function(){var e=this.doc.querySelectorAll("[data-hypothesis-trigger]");e&&[].forEach.call(e,function(e){delete e.dataset.hypothesisTrigger})}},{key:"removeHypothesisUIPopupOnSelect",value:function(){var e=this,t=void 0,i=function(i){if("HYPOTHESIS-ADDER"===i.nodeName){var n=e.doc.querySelector("hypothesis-adder");n&&o(n.parentElement)&&(n.parentElement.removeChild(n),t.disconnect())}},n=function(e){var t=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;"childList"===a.type&&a.addedNodes.length&&[].forEach.call(a.addedNodes,i)}}catch(l){n=!0,o=l}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw o}}},r=this.doc.querySelector("hypothesis-adder");r?r.parentElement.removeChild(r):(t=new MutationObserver(n),t.observe(this.doc.querySelector("body"),{childList:!0}))}},{key:"removeHypothesisUI",value:function(){this.removeHypothesisUICounters(),this.removeHypothesisUISidebar(),this.removeHypothesisUITriggers(),this.removeHypothesisUIPopupOnSelect()}},{key:"setupSpeechBubble",value:function(e){var t=new a(this.findElementWithClass("speech-bubble"));return e&&t.showLoadingIndicator(),t}},{key:"setupPlacementAndStyles",value:function(t){e.applyStyleInitial(this.$elm),t||(e.applyStyleArticleBody(this.$elm),this.setInitialDomLocation(this.$elm,s.getItemType(this.doc.querySelector("body"))))}},{key:"findElementWithClass",value:function(e){return this.$elm.querySelector("."+e)?this.$elm.querySelector("."+e):this.$elm.classList.contains(e)?this.$elm:null}},{key:"hookUpDataProvider",value:function(e,t,i,n){var o=this,r=e.querySelector("[data-hypothesis-annotation-count]");if(!r)return void this.handleInitFail(n,this.window);var s=new MutationObserver(function(e){e.forEach(function(e){try{if(!e.addedNodes[0])return;o.updateVisibleCount(e.addedNodes[0].data,i,t),o.speechBubble.removeLoadingIndicator(),o.window.clearTimeout(n)}catch(r){o.handleInitFail(n,o.window,r)}})});s.observe(r,{childList:!0})}},{key:"updateVisibleCount",value:function(e,t,i){var n=parseInt(e);isNaN(n)||n<0||(i?this.$elm.querySelector(t).innerHTML=""+n:this.updateVisibleCountArticleBody(n,t))}},{key:"updateVisibleCountArticleBody",value:function(e,t){e?this.speechBubble.update(e,t):this.speechBubble.showPlaceholder(t)}},{key:"setInitialDomLocation",value:function(t,i){if(i)try{e.findPositioningMethod(i).call(null,t,this.doc.querySelector(".content-container"))}catch(n){this.window.console.error(n)}}}],[{key:"hasLoadAlreadyFailed",value:function(e){return"failed"===e.dataset.hypothesisEmbedLoadStatus}},{key:"get$hypothesisLoader",value:function(e){var t=e.querySelector("#hypothesisEmbedder");if(t)return t;throw new Error("No Hypothesis loading code found")}},{key:"applyStyleInitial",value:function(e){e.classList.add("hypothesis-opener"),e.style.display="inline-block",e.style.cursor="pointer"}},{key:"applyStyleArticleBody",value:function(e){e.style.display="block",e.style["float"]="right",e.style.marginBottom="48px"}},{key:"positionCentrallyInline",value:function(t,i){var n=e.findTarget(i);return n?(t.classList.add("speech-bubble--inline"),n.insertBefore(t,n.firstChild),void e.wrappedInContainer(t)):void i.appendChild(t)}},{key:"positionBySecondSection",value:function(t,i){var n=i.querySelectorAll(".article-section--first");if(n.length)return n[n.length-1].nextElementSibling.querySelector(".article-section__body").appendChild(t),void e.wrappedInContainer(t);throw new Error("Trying to position hypothesis opener in second section, but can't find element with the css class article-section--first.")}},{key:"positionByFirstSection",value:function(t,i){var n=i.querySelectorAll(".article-section--first");if(n.length)return n[n.length-1].classList.contains("article-section--highlighted")?n[n.length-1].parentNode.insertBefore(t,n[n.length-1].nextElementSibling):n[n.length-1].appendChild(t),void e.wrappedInContainer(t);throw new Error("Trying to position hypothesis opener by first section but can't find element with the css class article-section--first.")}},{key:"wrappedInContainer",value:function(e){if(e.classList.contains("speech-bubble--wrapped")){var t=document.createElement("div");t.classList.add("speech-bubble--container"),e.parentNode.insertBefore(t,e),t.appendChild(e)}}},{key:"positionEnd",value:function(t,i){i.appendChild(t),e.wrappedInContainer(t)}},{key:"findPositioningMethod",value:function(t){var i={"blog-article":e.positionEnd,interview:e.positionEnd,"press-package":e.positionEnd,"labs-post":e.positionCentrallyInline,digest:e.positionEnd,insight:e.positionBySecondSection,feature:e.positionBySecondSection,editorial:e.positionBySecondSection,"default":e.positionByFirstSection};return i[t]||i["default"]}},{key:"findTarget",value:function(t){var i=null,n=Math.floor((t.querySelectorAll("p").length-1)/2);return[].forEach.call(t.querySelectorAll("p"),function(t,o){null===i&&o>=n&&!e.targetWithinInLineProfile(t)&&!e.targetWithinBlockquote(t)&&!e.targetBelowSectionHeading(t)&&(i=t)}),i}},{key:"targetWithinInLineProfile",value:function(e){return e.parentNode.parentNode.classList.contains("inline-profile")}},{key:"targetWithinBlockquote",value:function(e){return"BLOCKQUOTE"===e.parentNode.nodeName}},{key:"targetBelowSectionHeading",value:function(e){return 1===s.getOrdinalAmongstSiblingElements(e)&&e.parentNode.parentNode.classList.contains("article-section")}}]),e}()},{"../libs/elife-utils":45,"./SpeechBubble":37}],20:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.$elm=t,this.window=i,this.doc=o;var r=null,s="[data-visible-annotation-count]";this.hookUpDataProvider(this.$elm,s,r),this.$elm.dataset.hypothesisTrigger=""}}return r(e,[{key:"setupPreReadyIndicatorsWithTimer",value:function(t){var i=this;if(e.hasLoadAlreadyFailed(t))return void this.handleInitFail(null,this.window,!1);var n=12e4,o=this.window.setTimeout(this.handleTimerExpired.bind(this),n);return t.addEventListener("loaderror",function(e){i.handleInitFail(o,i.window,e)}),o}},{key:"handleInitFail",value:function(e,t,i){this.removeHypothesisUI();var n=t||this.window;if(n.clearTimeout(e),i!==!1){var o=void 0;o=i&&"string"==typeof i.message?i.message:"Problem loading or interacting with Hypothesis client.",this.window.console.error(new Error(o))}}},{key:"handleTimerExpired",value:function(){this.handleInitFail(null,this.window,new Error("Hypothesis loading timed out"))}},{key:"removeHypothesisUICounters",value:function(){var e=this.doc.querySelectorAll("[data-visible-annotation-count]");e&&[].forEach.call(e,function(e){var t=e.parentNode.parentNode.querySelector(".visuallyhidden");t.innerHTML="",delete e.dataset.visibleAnnotationCount})}},{key:"removeHypothesisUISidebar",value:function(){var e=this.doc.querySelector(".annotator-frame");e&&e.parentElement.removeChild(e)}},{key:"removeHypothesisUITriggers",value:function(){var e=this.doc.querySelectorAll("[data-hypothesis-trigger]");e&&[].forEach.call(e,function(e){delete e.dataset.hypothesisTrigger})}},{key:"removeHypothesisUIPopupOnSelect",value:function(){var e=this,t=void 0,i=function(i){if("HYPOTHESIS-ADDER"===i.nodeName){var n=e.doc.querySelector("hypothesis-adder");n&&o(n.parentElement)&&(n.parentElement.removeChild(n),t.disconnect())}},n=function(e){var t=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;"childList"===a.type&&a.addedNodes.length&&[].forEach.call(a.addedNodes,i)}}catch(l){n=!0,o=l}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw o}}},r=this.doc.querySelector("hypothesis-adder");r?r.parentElement.removeChild(r):(t=new MutationObserver(n),t.observe(this.doc.querySelector("body"),{childList:!0}))}},{key:"removeHypothesisUI",value:function(){this.removeHypothesisUICounters(),this.removeHypothesisUISidebar(),this.removeHypothesisUITriggers(),this.removeHypothesisUIPopupOnSelect()}},{key:"hookUpDataProvider",value:function(e,t,i){var n=this,o=e.querySelector("[data-hypothesis-annotation-count]");if(!o)return void this.handleInitFail(i,this.window);var r=new MutationObserver(function(e){e.forEach(function(e){try{if(!e.addedNodes[0])return;n.updateVisibleCount(e.addedNodes[0].data,t),n.window.clearTimeout(i)}catch(o){n.handleInitFail(i,n.window,o)}})});r.observe(o,{childList:!0})}},{key:"updateVisibleCount",value:function(e,t){var i=parseInt(e);isNaN(i)||i<0||this.updateVisibleCountArticleBody(i,t)}},{key:"updateVisibleCountArticleBody",value:function(e,t){var i=this.$elm.querySelector(t);e?i.innerHTML="&nbsp;("+e+")":i.innerHTML=""}}],[{key:"hasLoadAlreadyFailed",value:function(e){return"failed"===e.dataset.hypothesisEmbedLoadStatus}},{key:"get$hypothesisLoader",value:function(e){var t=e.querySelector("#hypothesisEmbedder");if(t)return t;throw new Error("No Hypothesis loading code found")}}]),e}()},{}],21:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("./_Dismissible");t.exports=function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,r),this.$elm=e,this.window=t,this.doc=i,this.dismissible=new o(this.$elm,this.$elm.querySelector(".info-bar__container"),this.doc)}},{"./_Dismissible":44}],22:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t&&(this.window=r,this.doc=a,this.$elm=t,this.linksList=this.$elm.querySelector(".jump-menu__list"),this.links=this.$elm.querySelectorAll(".jump-menu"),this.links.length>0)){var l=function(){if(i.mainTarget=i.doc.querySelector(".main"),!i.mainTarget)return{v:void 0};i.collapsibleSectionHeadings=e.getAllCollapsibleSectionHeadings(i.doc),i.isScrollingHandled=!1;var t=s.throttle(function(){i.handleScrolling()},50);i.isViewportWideEnoughForJumpMenu()&&i.startHandlingScrolling(t,i.handleScrolling),i.window.addEventListener("resize",s.throttle(function(){i.handleResize(t,i.handleScrolling)},200))}();if("object"===("undefined"==typeof l?"undefined":o(l)))return l.v}}return r(e,[{key:"isViewportWideEnoughForJumpMenu",value:function(){return this.window.matchMedia("(min-width: 1200px)").matches}},{key:"handleResize",value:function(e,t){var i=this.isViewportWideEnoughForJumpMenu();!this.isScrollingHandled&&i?this.startHandlingScrolling(e,t):this.isScrollingHandled&&!i&&this.stopHandlingScrolling(e)}},{key:"startHandlingScrolling",value:function(e,t){this.window.addEventListener("scroll",e),this.isScrollingHandled=!0,t.call(this)}},{key:"stopHandlingScrolling",value:function(e){this.window.removeEventListener("scroll",e),this.isScrollingHandled=!1}},{key:"handleScrolling",value:function(){this.handleHighlighting(s.closest)}},{key:"handleHighlighting",value:function(t){var i=this.findFirstInView(this.collapsibleSectionHeadings,this.doc,this.window),n=this.collapsibleSectionHeadings[0]?this.collapsibleSectionHeadings[0].innerHTML:"",o=e.findSectionForLinkHighlight(i,n,t,this.doc);if(o&&"string"==typeof o.id){var r=e.findLinkToHighlight(this.linksList,'[href="#'+o.id+'"]');r&&e.updateHighlighting(r,this.links)}}},{key:"findFirstInView",value:function(e,t,i){var n=[].slice.call(e),o=null;return n.forEach(function(e){o||s.isTopInView(e,t,i)&&(o=e)}),o}}],[{key:"getAllCollapsibleSectionHeadings",value:function(e){return e.querySelectorAll('[data-behaviour="ArticleSection"] > .article-section__header .article-section__header_text')}},{key:"updateHighlighting",value:function(t,i){e.clearJumpMenuHighlight(i),e.highlightJumpMenu(t)}},{key:"findSectionForLinkHighlight",value:function(e,t,i,n){if(e){var o=74,r=n.querySelector(".tabbed-navigation");return(!r||r&&r.classList.contains("hidden"))&&(o=1),e.innerHTML===t||e.getBoundingClientRect().top<o?i.call(null,e,".article-section"):i.call(null,e,".article-section").previousElementSibling}}},{key:"clearJumpMenuHighlight",value:function(e){var t=[].slice.call(e);t.forEach(function(e){e.classList.remove("jump-menu__active")})}},{key:"findLinkToHighlight",value:function(e,t){return e.querySelector(t)}},{key:"highlightJumpMenu",value:function(e){e.classList.add("jump-menu__active")}}]),e}()},{"../libs/elife-utils":45}],23:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.$elm=t,this.window=i,this.doc=o,this.extraLinksToBuild=null;try{var s=this.$elm.dataset.linkFieldRoots,a=void 0;s&&(a=e.deriveDataAttributeRoots(this.$elm.dataset.linkFieldRoots,this.$elm)),this.setPropertiesFromDataAttributes(a,this.$elm),this.extraLinksToBuild&&(this.$control=this.buildControl(this.extraLinksToBuild,this.$elm,r.buildElement),
this.$elm.appendChild(this.$control))}catch(l){this.window.console.log(l)}}return o(e,[{key:"setPropertiesFromDataAttributes",value:function(t,i){this.displayName=i.dataset.displayName,this.defaultUri=i.dataset.defaultUri,t&&(this.extraLinksToBuild=e.deriveLinksToBuild(t,i))}},{key:"buildControl",value:function(e,t,i){var n=i.call(null,"nav");return this.insertToggle(n,t,i),this.$menu=this.buildMenu(e,t,i),n.appendChild(this.$menu),n}},{key:"insertToggle",value:function(e,t,i){var n=i.call(null,"a",["login-control__controls_toggle"],"",e);n.setAttribute("href",this.defaultUri);var o=t.dataset.icon;"string"==typeof o&&o.length&&(n.innerHTML=o),n.addEventListener("click",this.toggle.bind(this))}},{key:"buildMenu",value:function(e,t,i){var n=i.call(null,"ul",["login-control__controls","hidden"]);return this.insertDefaultLink(n,t,i),e&&this.insertExtraLinks(e,n,i),n}},{key:"insertDefaultLink",value:function(e,t,i){var n=i.call(null,"li",["login-control__control"],"",e),o=i.call(null,"a",["login-control__link"],"",n);o.setAttribute("href",this.defaultUri),i.call(null,"div",["login-control__display_name"],this.displayName,o);var r=t.dataset.subsidiaryText;return r&&i.call(null,"div",["login-control__subsidiary_text"],r,o),n}},{key:"insertExtraLinks",value:function(t,i,n){if(!Array.isArray(t)||!t.length)throw new Error("Unable to build extra links, no data supplied");t.forEach(function(t){e.insertLink(t,i,n)})}},{key:"toggle",value:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen()?this.close():this.open()}},{key:"isOpen",value:function(){return!this.$menu.classList.contains("hidden")}},{key:"open",value:function(){this.$menu.classList.remove("hidden"),this.window.addEventListener("click",this.checkForClose.bind(this))}},{key:"checkForClose",value:function(e){r.areElementsNested(this.$menu,e.target)||this.close()}},{key:"close",value:function(){this.$menu.classList.add("hidden"),this.window.removeEventListener("click",this.checkForClose.bind(this))}}],[{key:"deriveDataAttributeRoots",value:function(t,i){if(!e.validateDataAttributeRootsList(t))throw new SyntaxError("invalid roots list supplied");var n=t.split(",").map(function(e){return e.trim()});if(!n[0].length)return[];if(!e.areAllImpliedDataAttributesPresent(n,i))throw new ReferenceError("One or more required data attributes implied by data-link-field-roots are missing");return n}},{key:"areAllImpliedDataAttributesPresent",value:function(t,i){var n=!0;return t.forEach(function(t){i.dataset[e.convertKebabCaseToCamelCase(t+"-uri")]&&i.dataset[e.convertKebabCaseToCamelCase(t+"-text")]||(n=!1)}),n}},{key:"validateDataAttributeRootsList",value:function(e){return"string"==typeof e&&e.search(/^[ \t]*[a-z][a-z-$_]*[^-,][ \t]*(,[ \t]*[a-z][a-z-$_]*[^-,][ \t]*)*$/)>-1}},{key:"deriveLinksToBuild",value:function(t,i){var n=[];return t.forEach(function(t){var o=t+"-text",r=e.convertKebabCaseToCamelCase(o),s=i.dataset[r],a=t+"-uri",l=e.convertKebabCaseToCamelCase(a),c=i.dataset[l];s&&c&&n.push({text:s,uri:c})}),n}},{key:"convertKebabCaseToCamelCase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&"string"==typeof e?e.replace(/\-([a-z])/g,function(e){return e.substring(1).toUpperCase()}):null}},{key:"insertLink",value:function(e,t,i){var n=i.call(null,"li",["login-control__control"],"",t),o=i.call(null,"a",["login-control__link"],e.text,n);o.setAttribute("href",e.uri)}}]),e}()},{"../libs/elife-utils":45}],24:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./Overlay"),s=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.window=i,this.doc=o,this.$elm=t,this.pageOverlay=new r("body",null,"overlayMainMenu",30),this.closeFn=this.close.bind(this),this.$elm.setAttribute("aria-expanded","false"),this.buildCloseControl())}return o(e,[{key:"moveWithinDom",value:function(){this.$elm.classList.add("main-menu--js");var e=this.doc.querySelector(".wrapper--site-header");e&&e.insertBefore(this.$elm,e.insertAfter)}},{key:"isOpen",value:function(){return this.$elm.classList.contains("main-menu--shown")}},{key:"close",value:function(){this.$elm.classList.remove("main-menu--shown"),this.$elm.setAttribute("aria-expanded","false"),this.pageOverlay.hide(),this.pageOverlay.get$elm().removeEventListener("click",this.closeFn)}},{key:"open",value:function(){this.$elm.classList.add("main-menu--shown"),this.$elm.setAttribute("aria-expanded","true"),this.$elm.focus(),this.pageOverlay.get$elm().addEventListener("click",this.closeFn),this.pageOverlay.show()}},{key:"buildCloseControl",value:function(){var e=void 0;if(!this.$elm.querySelector("#mainMenuCloseControl")){var t=this.$elm.querySelector(".main-menu__title-container");e=s.buildElement("button",["main-menu__close_control"],"Close",t,t.firstElementChild),e.id="mainMenuCloseControl",e.addEventListener("click",this.close.bind(this))}}}]),e}()},{"../libs/elife-utils":45,"./Overlay":28}],25:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.window=i,this.isSingleton=!0,e.init(o)}return o(e,null,[{key:"init",value:function(t){if(e.loadDependencies(t),"MutationObserver"in window&&!e.dependenciesAlreadySetup(t)){var i=new MutationObserver(function(i,n){e.loadDependencies(t),e.dependenciesAlreadySetup(t)&&n.disconnect()});i.observe(t.body,{childList:!0,subtree:!0})}}},{key:"loadDependencies",value:function(t){t.querySelector("math")&&(e.setupProperties(),e.load(t))}},{key:"dependenciesAlreadySetup",value:function(e){return!!e.querySelector('script[src*="mathjax"]')}},{key:"setupProperties",value:function(){window.MathJax={CommonHTML:{linebreaks:{automatic:!0,width:"75% container"}},"fast-preview":{disabled:!0},"HTML-CSS":{linebreaks:{automatic:!0,width:"75% container"}},SVG:{linebreaks:{automatic:!0,width:"75% container"}}}}},{key:"setupResizeHandler",value:function(){window.MathJax.Hub.Config({"HTML-CSS":{linebreaks:{automatic:!0,width:"75% container"},scale:function(){function e(e){var t=function(){return!!navigator.userAgent.match(/iPad|iPhone/)};return!(e.isMSIE||e.isMac&&(e.isSafari||e.isChrome)||t()&&e.isSafari||e.isFirefox&&!e.isMac&&!e.isPC||"Unknown"===e.toString())}var t=90,i=2*t;return e(window.MathJax.Hub.Browser)?i:t}()}}),this.currentClientWidth=document.body.clientWidth;var e=void 0,t=function(){e||(e=setTimeout(function(){e=null,this.window.MathJax&&this.currentClientWidth!==document.body.clientWidth&&(this.currentClientWidth=document.body.clientWidth,this.window.MathJax.Hub.Queue(["Rerender",this.window.MathJax.Hub]))},300))};window.addEventListener("resize",t)}},{key:"load",value:function(t){var i=t.createElement("script");i.type="text/javascript",i.addEventListener("load",e.setupResizeHandler),i.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_HTMLorMML",i.integrity="sha384-Ra6zh6uYMmH5ydwCqqMoykyf1T/+ZcnOQfFPhDrp2kI4OIxadnhsvvA2vv9A7xYv",i.crossOrigin="anonymous",t.querySelector("body").appendChild(i)}}]),e}()},{}],26:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return n(this,e),t?(console.log("Initialising Chapter listing item..."),this.$elm=t,this.startTime=t.dataset.startTime,void(!this.startTime||isNaN(this.startTime)||this.startTime<0||(this.window=i,this.document=o,i.addEventListener("playerReady",this.listenForChapterChange.bind(this)),this.$link=this.createLink(o,this.$elm,this.startTime),this.setupEventHandlers(this.$link)))):void console.warn("No element provided")}return o(e,[{key:"listenForChapterChange",value:function(e){var t=this.document.getElementById(e.detail);t&&t.addEventListener("chapterChanged",this.indicateChapterChanged.bind(this))}},{key:"createLink",value:function(e,t,i){var n=t.querySelector(".media-chapter-listing-item__header_text");if(n){var o=void 0,r=void 0;try{r=n.querySelector(".media-chapter-listing-item__header_text_link"),o=r.innerHTML,r.parentNode.removeChild(r)}catch(s){o=n.innerHTML}var a=e.createElement("a");return a.innerHTML=o,a.setAttribute("href","#"+i),a.classList.add("media-chapter-listing-item__header_text_link"),n.innerHTML="",n.appendChild(a),a}}},{key:"indicateChapterChanged",value:function(e){var t=e.detail;t===this.window.parseInt(this.$elm.dataset.chapterNumber)?this.$elm.classList.add("current-chapter"):this.$elm.classList.remove("current-chapter")}},{key:"setupEventHandlers",value:function(e){e.addEventListener("chapterChanged",this.indicateChapterChanged)}}]),e}()},{}],27:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){this.$elm=t,this.window=o,this.doc=r;var s=this.$elm.getAttribute("data-trigger-id"),a=void 0;a=s&&this.doc.getElementById(s)?this.doc.getElementById(s):this.$elm.querySelector(".modal-click"),this.modalWindow=this.$elm.querySelector(".modal-container"),a.addEventListener("click",function(e){return i.modalToggle(e)}),this.$elm.querySelector(".modal-content__button").addEventListener("click",function(e){return i.modalToggle(e)}),this.window.addEventListener("click",function(e){return i.windowOnClick(e)}),this.window.addEventListener("resize",function(){i.$elm.classList.contains("small-device")&&i.window.innerWidth>=480&&i.modalWindow.classList.remove("modal-content__show")}),this.$elm.classList.remove("modal-nojs")}}return o(e,[{key:"modalToggle",value:function(e){(!this.$elm.classList.contains("small-device")||this.window.innerWidth<480)&&(this.modalWindow.classList.toggle("modal-content__show"),this.modalWindow.classList.contains("modal-content__show")||this.$elm.dispatchEvent(r.eventCreator("modalWindowClose"))),e.preventDefault()}},{key:"windowOnClick",value:function(e){e.target===this.modalWindow&&this.modalToggle(e)}}]),e}()},{"../libs/elife-utils":45}],28:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t,i,o,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:document;n(this,e),this.window=a,this.doc=l,this.$parent=this.find$parent(t),this.$parent&&(this.$elm=r.create$pageOverlay(this.$parent,i,o),this.$elm&&this.assignZIndex(s))}return o(e,[{key:"hide",value:function(){this.$elm.classList.add("hidden")}},{key:"show",value:function(){this.$elm.style.height=this.$parent.getBoundingClientRect().height+"px",this.$elm.classList.remove("hidden")}},{key:"assignZIndex",value:function(e){isNaN(e)||(this.$elm.style?this.$elm.style.zIndex=e:this.$elm.style={zIndex:e})}},{key:"assignTop",value:function(e){isNaN(e)||(this.$elm.style?this.$elm.style.top=e+"px":this.$elm.style={top:e+"px"})}},{key:"find$parent",value:function(e){return e instanceof HTMLElement?e:this.doc.querySelector(e)}},{key:"get$elm",value:function(){return this.$elm}}]),e}()},{"../libs/elife-utils":45}],29:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.$elm=t,this.window=i,this.doc=o,this.$targetEl=this.find$targetEl(),this.$loader=this.find$Loader(),this.$loader&&this.$targetEl&&(this.isCurrentlyLoading=!1,this.timeoutThresholdInMs=1e4,this.loaderLink=this.$loader.getAttribute("href"),this.$loader.addEventListener("click",this.handleLoadRequest.bind(this))))}return o(e,[{key:"createDocFragFromString",value:function(e){if("string"==typeof e){var t=this.doc.createDocumentFragment(),i=this.doc.createElement("div");for(i.innerHTML=e;i.firstElementChild;){var n=i.firstElementChild;t.appendChild(n)}return t}}},{key:"injectNewData",value:function(t){var i=e.normaliseData(t);this.setLoaderLinkFromData(i);var n=/.*<ol[^>]*class="[^"]*(grid-listing|listing-list)[^"]*"[^>]*>(<li>?.*<\/li>)<\/ol>.*/,o=i.match(n);if(!o||!o[2])throw new SyntaxError("Loaded data doesn't match required format");this.$targetEl.appendChild(this.createDocFragFromString(o[2]))}},{key:"redirectToFullResultsPage",value:function(){var e=this.getLoaderLink();e&&(this.window.location.search=e)}},{key:"handleError",value:function(){this.redirectToFullResultsPage()}},{key:"getLoaderLink",value:function(){return this.loaderLink}},{key:"setLoaderLinkFromData",value:function(e){var t=/.*(<div[^>]*class="[^"]*pager[^"]*"[^>]*>.*<\/div>).*/,i=this.createDocFragFromString(e.match(t)[1]);if(!i)return void(this.loaderLink="#");var n=i.querySelector(".button:nth-child(2)");if(!n)return void(this.loaderLink="#");var o=n.href,r=this.window.location;this.loaderLink=o.replace(r.protocol+"//"+r.host,""),this.$loader.setAttribute("href",this.loaderLink)}},{key:"setLoadingState",value:function(){var e=this;this.isCurrentlyLoading=!0,this.$loader.classList.add("button--inactive");var t=this.$loader.querySelector(".pager__text_wrapper");t&&(t.innerHTML="Loading...",t.classList.add("loading")),this.loadingTimer=this.window.setTimeout(function(){e.redirectToFullResultsPage()},this.timeoutThresholdInMs)}},{key:"clearLoadingState",value:function(){this.window.clearTimeout(this.loadingTimer),this.isCurrentlyLoading=!1;var e=this.$loader.querySelector(".pager__text_wrapper");e&&(e.classList.remove("loading"),e.innerHTML=this.$loader.originalText?this.$loader.originalText:"Load more"),this.$loader.classList.remove("button--inactive")}},{key:"updatePager",value:function(t){e.isLastPage(t)?this.$loader.parentNode.removeChild(this.$loader):this.setLoaderLinkFromData(t)}},{key:"updateUrl",value:function(e){e&&this.window.history.pushState(null,"",e)}},{key:"handleLoad",value:function(t){var i=this.loaderLink,n=void 0;try{n=e.normaliseData(t),this.injectNewData(n)}catch(o){return void this.handleError(o)}this.clearLoadingState(),this.updateUrl(i),this.updatePager(n)}},{key:"handleLoadRequest",value:function(e){return e.preventDefault(),this.isCurrentlyLoading?null:(this.loadData(this.getLoaderLink(),this.window.XMLHttpRequest).then(this.handleLoad.bind(this),this.handleError.bind(this)),void this.setLoadingState())}},{key:"loadData",value:function(e,t){return new Promise(function(i,n){var o=new t;o.addEventListener("load",function(){i(o.responseText)}),o.addEventListener("error",n),o.open("GET",e),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send()})}},{key:"find$Loader",value:function(){var e=this.$elm.querySelector(".button--full:first-child.button--full:last-child");if(e){e.id=r.uniqueIds.get("pager",this.doc),e.originalText=e.innerHTML;var t=this.doc.createElement("span");return t.classList.add("pager__text_wrapper"),t.innerHTML=e.originalText,e.replaceChild(t,e.firstChild),e}}},{key:"find$targetEl",value:function(){return this.doc.getElementById(this.$elm.dataset.targetid)}}],[{key:"normaliseData",value:function(e){var t=e.replace(/^\s+([^\s])/gm,"$1");return t.replace(/\n/g,"")}},{key:"isLastPage",value:function(e){return!e.match(/class="pager".*button--default.*button--default/g)}}]),e}()},{"../libs/elife-utils":45}],30:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.$elm=t,this.window=i,this.doc=o,this.groups={},this.init())}return o(e,[{key:"init",value:function(){this.prepareButtons(),this.introduceCheckbox()}},{key:"prepareButtons",value:function(){var e=this,t=this.$elm.querySelectorAll(".list-heading");[].forEach.call(t,function(t){var i=t.innerText,n="button-collection--"+i.toLowerCase().replace(/\s+/g,"");t.classList.add("visuallyhidden"),t.nextElementSibling.classList.add(n),e.groups[n]=i})}},{key:"introduceCheckbox",value:function(){var e=this;if(2===Object.keys(this.groups).length){this.toggleButtons();var t=this.createCheckbox();t.addEventListener("change",function(t){e.toggleButtons(t.target.checked)})}}},{key:"toggleButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,i=void 0;e?(t=Object.keys(this.groups)[0],i=Object.keys(this.groups)[1]):(t=Object.keys(this.groups)[1],i=Object.keys(this.groups)[0]),this.$elm.querySelector("."+t).classList.add("visuallyhidden"),this.$elm.querySelector("."+i).classList.remove("visuallyhidden")}},{key:"createCheckbox",value:function(){var e=this.groups[Object.keys(this.groups)[0]],t=this.groups[Object.keys(this.groups)[1]],i=this.doc.createElement("div");return i.setAttribute("class","form-item form-item__checkbox"),i.innerHTML='\n    <div for="letter-style" class="checkbox__label selected-model" aria-label="'+e+'">'+e+'</div>\n\n    <label class="form-item__label toggle-checkbox">\n      <input type="checkbox" id="letter-style" class="type-of-model">\n      <span class="toggle-checkbox__slider round"></span>\n    </label>\n\n    <div for="letter-style" class="checkbox__label" aria-label="'+t+'">'+t+"</div>\n    ",this.$elm.insertBefore(i,this.$elm.firstChild),i.querySelector("input")}}]),e}()},{}],31:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e);var a=void 0;t.dataset.popupWrapper?(a=r.buildElement("a"),a.classList.add("popup__wrapper"),a.href="#",t.parentNode.insertBefore(a,t),a.appendChild(t)):a=t,(t.dataset.popupSelf||a.hash&&a.host===o.location.host&&a.hash.match(/^#[a-z]/i))&&(this.$link=a,this.$elm=t,this.isOpen=!1,this.resolver=null,this.window=o,this.doc=s,this.bodyContents=null,this.thresholdWidth=730,this.$link.addEventListener("click",function(e){return i.handleLinkClick(e)}),s.addEventListener("click",function(e){return i.handleDocumentClick(e)}))}return o(e,[{key:"handleLinkClick",value:function(e){var t=this;if(!this.window.matchMedia("(min-width: "+this.thresholdWidth+"px)").matches)return void(e.currentTarget.href.match(/.*#$/)&&(e.stopPropagation(),e.preventDefault()));if(!r.closest(this.$link,"table")){if(!this.$link)return!0;e.preventDefault(),this.isOpen=!this.isOpen,this.render(e).then(function(){if(t.isEmpty){var e=t.$link;t.$link=null,e.click()}})}}},{key:"handleDocumentClick",value:function(e){if(this.window.matchMedia("(min-width: "+this.thresholdWidth+"px)").matches&&r.closest(e.target,"a")!==this.$link){var t=r.closest(e.target,".popup");t&&t===this.popupHitBox||this.isOpen&&(this.isOpen=!1,this.render(e))}}},{key:"getResolver",value:function(e){return this.resolver?this.resolver:(e.hash?this.resolver=r.remoteDoc(e.href,this.window):this.resolver=Promise.resolve(null),this.resolver)}},{key:"getBodyContentsFromNode",value:function(e){if(!e)return this.emptyResponse();if(!e.getAttribute("data-popup-contents"))return this.emptyResponse();if(e.getAttribute("data-popup-label")&&(this.label=e.getAttribute("data-popup-label")),e.getAttribute("data-popup-contents")===e.id)return e.cloneNode(!0);var t=e.getElementById(e.getAttribute("data-popup-contents"));return t?t.cloneNode(!0):this.emptyResponse()}},{key:"emptyResponse",value:function(){return this.isEmpty=!0,null}},{key:"requestContents",value:function(e){var t=this;return this.$elm.dataset.popupSelf?(this.bodyContents=this.$elm.cloneNode(!0),Promise.resolve(this.render(e))):this.getResolver(this.$link).then(function(i){return i?(t.bodyContents=t.getBodyContentsFromNode(i.querySelector(t.$link.hash)),t.render(e)):(t.emptyResponse(),Promise.resolve(t.$link))})}},{key:"createBottomBar",value:function(e,t){var i=r.buildElement("div",["popup__actions","clearfix"]),n=r.buildElement("a",["popup__button","popup__button--right"],e,i);return n.href=t,i}},{key:"createPopupBox",value:function(){for(var e=void 0,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return[].forEach.call(i,function(t){t.classList.contains("popup__content")&&(e=t)}),e instanceof HTMLElement&&!function(){var t=r.buildElement("div",["popup__content__ancillary"]),i=["reference__title","reference__authors_list","reference__authors_list_suffix","author-details__name","about-profile__name","about-profile__role"],n=[];[].forEach.call(e.children,function(e){var t=!1;[].forEach.call(e.classList,function(o){t||i.indexOf(o)!==-1||(n.push(e),t=!0)})}),n.forEach(function(e){t.appendChild(e)}),e.appendChild(t)}(),r.wrapElements(i,"div","popup__window")}},{key:"createPopupHitBox",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.wrapElements(t,"div","popup")}},{key:"calcInitialPosition",value:function(e,t){if(e.pageX||e.pageY)return{left:e.pageX-t/2,top:e.pageY+20};var i=e.currentTarget.getBoundingClientRect();return{left:i.left+this.window.scrollX,top:i.bottom-72+this.window.scrollY}}},{key:"setAccessibilityAttributesPopupHitBox",value:function(e){e?(this.popupHitBox.setAttribute("role","alert"),this.popupHitBox.setAttribute("aria-expanded","true"),this.popupHitBox.setAttribute("aria-hidden","false"),this.popupHitBox.blur()):(this.popupHitBox.setAttribute("aria-expanded","false"),this.popupHitBox.setAttribute("aria-hidden","true"),this.popupHitBox.style.display="none")}},{key:"setAttributesForOpenPopupHitBox",value:function(e){this.setAccessibilityAttributesPopupHitBox(!0,e)}},{key:"setAttributesForClosedPopupHitBox",value:function(){this.setAccessibilityAttributesPopupHitBox(!1)}},{key:"positionPopupHitBox",value:function(e){this.popupHitBox.style.display="";var t=this.popupHitBox.offsetWidth,i=this.popupHitBox.offsetHeight,n=this.calcInitialPosition(e,t),o=n.left,r=n.top;o<10&&(o=10),o+t+10>this.window.innerWidth&&(o=this.window.innerWidth-t-10);var s=e.pageY-i-20;r+i+10>this.window.pageYOffset+this.window.innerHeight&&s>=this.window.pageYOffset+10&&(r=s),this.$link.parentNode.insertBefore(this.popupHitBox,this.$link.nextElementSibling),this.popupHitBox.style.left=o+"px",this.popupHitBox.style.top=r+"px",this.setAttributesForOpenPopupHitBox(e)}},{key:"render",value:function(t){var i=this;if(this.isEmpty)return Promise.resolve(this.$link);if(!this.bodyContents)return this.requestContents(t);if(!this.popupHitBox){this.bodyContents.id=r.uniqueIds.get("popupFragment",this.doc),this.bodyContents.classList.add("popup__content");var n=[this.bodyContents];this.label&&n.push(this.createBottomBar(this.label,this.$link.href)),this.popupHitBox=this.createPopupHitBox(this.createPopupBox.apply(this,n)),e.setLinksClasses(this.popupHitBox),this.doc.body.appendChild(this.popupHitBox),this.window.addEventListener("resize",r.debounce(function(){i.window.matchMedia("(min-width: "+i.thresholdWidth+"px)").matches&&(i.isOpen=!1,i.render(t))},150))}return this.isOpen?(this.positionPopupHitBox(t),this.popupHitBox.addEventListener("blur",function(){i.setAttributesForClosedPopupHitBox(),i.isOpen=!1,i.$link.focus()})):(this.popupHitBox.style.display="none",this.setAttributesForClosedPopupHitBox(),this.$link.focus()),Promise.resolve(this.$link)}}],[{key:"setLinksClasses",value:function(e){e instanceof HTMLElement&&[].slice.call(e.querySelectorAll("a")).forEach(function(e){e.classList.add("popup__link")})}}]),e}()},{"../libs/elife-utils":45}],32:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e);try{this.$elm=t,this.$input=this.$elm.querySelector('input[type="search"]')}catch(r){return}this.window=i,this.doc=o,this.$container=t.querySelector("fieldset"),this.$resetButton=t.querySelector('button[type="reset"]'),this.$elm.classList.add("search-box--js"),this.$resetButton.addEventListener("click",this.reset.bind(this)),this.$input.addEventListener("keyup",this.handleInput.bind(this)),this.$input.addEventListener("paste",this.handleInput.bind(this))}return o(e,[{key:"reset",value:function(){this.hideResetButton(),this.$output&&(this.$output.innerHTML=""),this.$input.focus()}},{key:"hideResetButton",value:function(){this.$elm.classList.remove("search-box--populated")}},{key:"showResetButton",value:function(){this.$elm.classList.add("search-box--populated")}},{key:"handleInput",value:function(e){9!==e.keyCode&&(this.$input.value.length>0?this.showResetButton():this.hideResetButton())}}]),e}()},{}],33:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e);try{if(!(t instanceof HTMLElement&&t.href.length&&t.href.indexOf("#")>-1))return}catch(r){return}this.window=i,this.doc=o,this.$elm=t,this.href=this.$elm.href,this.$listing=this.doc.getElementById(this.href.substring(this.href.indexOf("#")+1)),this.$listing?this.init():this.$elm.classList.add("hidden")}return o(e,[{key:"init",value:function(){var e=this;this.$defaultListParent=this.$listing.parentNode,this.$wideViewListParent=this.$elm.parentNode,this.breakpoint=1200,this.handleWidth(),this.window.addEventListener("resize",r.debounce(function(){return e.handleWidth()},10))}},{key:"handleWidth",value:function(){this.updateView(this.$listing,this.$defaultListParent,this.$wideViewListParent,this.breakpoint)}},{key:"updateView",value:function(e,t,i,n){this.window.matchMedia("(min-width: "+n+"px)").matches?this.showWideView(e,i):this.restoreDefaultView(e,t)}},{key:"showWideView",value:function(e,t){e.parentNode!==t&&(t.appendChild(e),this.$elm.classList.add("hidden"))}},{key:"restoreDefaultView",value:function(e,t){e.parentNode!==t&&(t.appendChild(e),this.$elm.classList.remove("hidden"))}}]),e}()},{"../libs/elife-utils":45}],34:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){n(this,e),t&&(this.$elm=t,this.$elm.classList.add("select-nav--js"),this.$elm.querySelector("select").addEventListener("change",this.triggerSubmit.bind(this)))}return o(e,[{key:"triggerSubmit",value:function(){this.$elm.submit()}}]),e}()},{}],35:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t,i,o){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document;n(this,e),t&&(this.window=a,this.doc=l,this.$global=t,this.$header=o,this.eachButHeader=function(e){[].forEach.call(s.$global.childNodes,function(t){t.tagName&&(r.areElementsNested(t,s.$header)||e(t))})},this.src=i)}return o(e,[{key:"open",value:function(){this.saveScrollingPosition(),this.$iframe=this.doc.querySelector(".side-by-side-view__iframe"),this.$iframe?this.$iframe.classList.remove("hidden"):(this.$iframe=e.createIframe(this.src),this.doc.body.appendChild(this.$iframe)),this.$closeBar=this.doc.querySelector(".side-by-side-view__bar"),this.$closeBar?this.$closeBar.classList.remove("hidden"):(this.$closeBar=this.createCloseBar(),this.doc.body.appendChild(this.$closeBar)),this.hideEverythingButHeader()}},{key:"close",value:function(){this.$closeBar.classList.add("hidden"),this.$iframe.classList.add("hidden"),this.showEverything(),this.restoreScrollingPosition()}},{key:"saveScrollingPosition",value:function(){this.currentYScrollPos=this.window.pageYOffset,this.window.scroll(0,0)}},{key:"restoreScrollingPosition",value:function(){this.window.scroll(0,this.currentYScrollPos),this.currentYScrollPos=null}},{key:"hideEverythingButHeader",value:function(){this.eachButHeader(function(e){e.classList.add("hidden")})}},{key:"showEverything",value:function(){this.eachButHeader(function(e){e.classList.remove("hidden");
})}},{key:"createCloseBar",value:function(){var e=this,t=r.buildElement("div",["side-by-side-view__bar"]),i=r.buildElement("button",["side-by-side-view__button-close"],'<span class="side-by-side-view__button-close-cross">&#x2715;</span><span class="side-by-side-view__button-close-text">Close side by side view</span>',t);return i.addEventListener("click",function(){e.close()}),t}}],[{key:"createIframe",value:function(e){var t=r.buildElement("iframe",["side-by-side-view__iframe"]);return t.src=e,t}}]),e}()},{"../libs/elife-utils":45}],36:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./Overlay"),s=e("../libs/elife-utils")();t.exports=function(){function t(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,t),i){this.$elm=i,this.window=o,this.doc=s;var a=e("./SearchBox"),l=i.querySelector('[data-behaviour="SearchBox"]');this.searchBox=new a(l,this.window,s);var c=i.querySelector('[rel="search"]');c&&(this.searchToggle=c.parentNode,this.searchToggle.addEventListener("click",this.toggleSearchBox.bind(this)));var u=this.doc.querySelector(".main");if(u){var d=u.firstElementChild;this.pageOverlay=new r(u,d,"mainMenuOverlay",this.window,this.doc),this.pageOverlay.assignTop(96);var h=s.getElementById("mainMenu");if(h){var f=e("./MainMenu");this.mainMenu=new f(h),this.$mainMenuToggle=this.$elm.querySelector('a[href="#mainMenu"]'),this.$mainMenuToggle&&(this.mainMenu.moveWithinDom(),this.$mainMenuToggle.addEventListener("click",this.toggleMainMenu.bind(this)))}}}}return o(t,[{key:"toggleMainMenu",value:function(e){this.mainMenu.isOpen()?(this.mainMenu.close(),this.window.removeEventListener("keyup",this.checkForMenuClose.bind(this)),this.doc.querySelector(".global-inner").removeEventListener("click",this.checkForMenuClose.bind(this))):(this.mainMenu.open(),this.window.addEventListener("keyup",this.checkForMenuClose.bind(this)),this.doc.querySelector(".global-inner").addEventListener("click",this.checkForMenuClose.bind(this))),e.preventDefault(),e.stopPropagation()}},{key:"checkForMenuClose",value:function(e){27!==e.keyCode&&"click"!==e.type||e.target.classList.contains("main-menu__list_item")||this.mainMenu.close()}},{key:"toggleSearchBox",value:function(e){e.preventDefault(),e.stopPropagation(),this.searchBoxIsOpen()?this.closeSearchBox():this.openSearchBox()}},{key:"searchBoxIsOpen",value:function(){return this.searchBox.$elm.classList.contains("search-box--shown")}},{key:"closeSearchBox",value:function(){this.searchBox.$elm.classList.remove("search-box--shown"),s.updateElementTranslate(this.searchBox.$elm,[0,"-40px"]),this.searchBox.$output&&(this.searchBox.$output.innerHTML=""),this.searchBox.$input.blur(),this.window.removeEventListener("keyup",this.checkForClose.bind(this)),this.window.removeEventListener("click",this.checkForClose.bind(this)),this.pageOverlay.hide()}},{key:"checkForClose",value:function(e){(e.keyCode&&27===e.keyCode||"click"===e.type&&!s.areElementsNested(this.searchBox.$elm,e.target))&&this.closeSearchBox()}},{key:"openSearchBox",value:function(){var e=this,t=this.window.getComputedStyle(this.$elm).height,i=20,n=s.adjustPxString(t,i,"add"),o=150;s.updateElementTranslate(this.searchBox.$elm,[0,n]),s.invertPxString(this.window.getComputedStyle(this.searchBox.$container).height),this.searchBox.$elm.classList.add("search-box--shown"),this.window.addEventListener("keyup",this.checkForClose.bind(this)),this.window.addEventListener("click",this.checkForClose.bind(this)),this.window.setTimeout(function(){e.searchBox.$input.blur(),e.searchBox.$input.focus()},o),this.pageOverlay.show()}}]),t}()},{"../libs/elife-utils":45,"./MainMenu":24,"./Overlay":28,"./SearchBox":32}],37:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),t&&(this.$elm=t,this.window=i,this.doc=o,this.placeholder="+")}return o(e,[{key:"removePlaceholder",value:function(){this.$elm.classList.remove("speech-bubble--has-placeholder");var e="\\"+this.placeholder,t=new RegExp(e,"g");this.$elm.innerHTML=this.$elm.innerHTML.replace(t,"")}},{key:"showPlaceholder",value:function(e){var t=this.$elm.querySelector(e)||this.$elm;t.innerHTML=this.placeholder,this.$elm.classList.add("speech-bubble--has-placeholder")}},{key:"update",value:function(e,t){this.removePlaceholder();var i=this.$elm.querySelector(t)||this.$elm;i.innerHTML=e}},{key:"showLoadingIndicator",value:function(){this.$elm.classList.add("speech-bubble--loading")}},{key:"removeLoadingIndicator",value:function(){this.$elm.classList.remove("speech-bubble--loading")}},{key:"showFailureState",value:function(e){e&&null!==this.$elm.parentNode?this.$elm.parentNode.remove():this.$elm.remove()}}]),e}()},{}],38:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("../libs/elife-utils")();t.exports=function r(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,r),e&&(this.$elm=e,this.window=i,this.doc=s,this.window.addEventListener("load",function(){o.removeSeparatorFromLastOnLine(t.$elm,".statistic-collection__item","no-separator")}),this.window.addEventListener("resize",function(){o.removeSeparatorFromLastOnLine(t.$elm,".statistic-collection__item","no-separator")}))}},{"../libs/elife-utils":45}],39:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./SideBySideView");t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),this.$elm=t,this.window=i,this.doc=o,this.$sideBySide=this.$elm.querySelector(".tabbed-navigation__tab-label--side-by-side"),this.tabElements=this.$elm.querySelectorAll(".tabbed-navigation__tab-label"),1===this.tabElements.length&&this.$elm.classList.add("hidden"),this.sideBySideViewAvailable()){var s=this.doc.getElementById("siteHeader");this.$global=this.doc.querySelector(".global-inner"),this.sideBySideView=new r(this.$global,this.$sideBySide.dataset.sideBySideLink,s,this.window,this.doc),this.openSideBySideListItem()}}return o(e,[{key:"sideBySideViewAvailable",value:function(){var e=this;if(!this.$sideBySide)return!1;var t=this.$sideBySide.dataset.sideBySideLink;if(!t)return!1;var i=function(){return!(!t||!t.match(/^https:\/\/.*$/))},n=function(){try{if(!e.window.CSS||!e.window.CSS.supports)return!1}catch(t){return!1}return e.window.CSS.supports("text-orientation","sideways")||e.window.CSS.supports("-webkit-text-orientation","sideways")};return i()&&n()}},{key:"openSideBySideListItem",value:function(){var e=this;this.$sideBySide.addEventListener("click",function(t){t.preventDefault(),e.sideBySideView.open()})}}]),e}()},{"./SideBySideView":35}],40:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("text-clipper"),s=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.window=o,this.doc=r,this.thresholdWidth=t.dataset.thresholdWidth,this.$elm=t,t instanceof HTMLElement&&(this.$caption=this.$elm.querySelector(this.$elm.getAttribute("data-selector")),this.$caption instanceof HTMLElement&&(this.setupToggle(),this.truncatedHtml&&(null!==this.thresholdWidth?(this.toggleToggle(),this.window.addEventListener("resize",s.debounce(function(){return i.toggleToggle()},150))):this.toggleCaption())))}return o(e,[{key:"setupToggle",value:function(){var e='<button class="caption-text__toggle caption-text__toggle--see-more">see more</button>',t='<button class="caption-text__toggle caption-text__toggle--see-less">see less</button>',i=[];[].forEach.call(this.$caption.childNodes,function(e){return i.push(e.outerHTML)}),i=i.filter(function(e){return e}),this.originalHtml=i.join(" "),i.push(t);var n=i;if("P"===this.$caption.firstElementChild.nodeName.toUpperCase()){var o=n[0];try{o=r(n[0],200,{html:!0,maxLines:1})}catch(s){console.log(s)}if(!(o!==n[0]||n.length>3))return;n=[o.replace(/<\/p>/," "+e+"</p>")]}else n=[e];this.fullHtml=i.join(" "),this.truncatedHtml=n.join(" ")}},{key:"toggleCaption",value:function(e){var t=this.$caption.querySelector(".caption-text__toggle");this.$caption.innerHTML="",!t||t.classList.contains("caption-text__toggle--see-less")?(this.$caption.innerHTML=this.truncatedHtml,e&&this.$caption.getBoundingClientRect().top<0&&this.$caption.scrollIntoView()):this.$caption.innerHTML=this.fullHtml,this.window.MathJax&&this.window.MathJax.Hub&&this.window.MathJax.Hub.Queue(["Typeset",this.window.MathJax.Hub,this.$caption]),this.$caption.querySelector(".caption-text__toggle").addEventListener("click",this.toggleCaption.bind(this))}},{key:"toggleToggle",value:function(){this.window.matchMedia("(min-width: "+this.thresholdWidth+"px)").matches?this.removeToggle():this.restoreToggle()}},{key:"removeToggle",value:function(){var e=this.$caption.querySelector(".caption-text__toggle");e&&(this.$caption.innerHTML=this.originalHtml)}},{key:"restoreToggle",value:function(){var e=this.$caption.querySelector(".caption-text__toggle");e||this.toggleCaption()}}]),e}()},{"../libs/elife-utils":45,"text-clipper":138}],41:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n(this,e),this.window=i,this.isSingleton=!0,e.init(o)}return o(e,null,[{key:"init",value:function(t){if(e.loadDependencies(t),"MutationObserver"in window&&!e.dependenciesAlreadySetup(t)){var i=new MutationObserver(function(i,n){e.loadDependencies(t),e.dependenciesAlreadySetup(t)&&n.disconnect()});i.observe(t.body,{childList:!0,subtree:!0})}}},{key:"loadDependencies",value:function(t){t.querySelector('blockquote[class*="twitter-tweet"]')&&e.load(t)}},{key:"dependenciesAlreadySetup",value:function(e){return!!e.querySelector('script[src*="twitter"]')}},{key:"load",value:function(e){var t=e.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://platform.twitter.com/widgets.js",t.charset="utf-8",e.querySelector("body").appendChild(t)}}]),e}()},{}],42:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./SideBySideView"),a=e("../libs/elife-utils")();t.exports=function(){function e(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(n(this,e),t){if(this.window=r,this.doc=l,this.$elm=t,this.$jumpLinksList=this.$elm.querySelector(".view-selector__list"),this.jumpLinks=this.$elm.querySelectorAll(".view-selector__jump_link"),this.cssFixedClassName="view-selector--fixed",this.$navDetect=this.doc.querySelector(".content-container-grid"),this.isTabSelector=this.$elm.classList.contains("button--switch-selector"),this.primarySelector=null,this.secondarySelector=null,this.primaryColumn=null,this.secondaryColumn=null,this.isTabSelector&&!function(){i.primarySelector=i.$elm.querySelector(".view-selector__link--primary"),i.secondarySelector=i.$elm.querySelector(".view-selector__link--secondary"),i.primaryColumn=i.doc.getElementById(i.primarySelector.getAttribute("href").replace(/^\#/,"")),i.secondaryColumn=i.doc.getElementById(i.secondarySelector.getAttribute("href").replace(/^\#/,""));var e="view-selector__list-item--active",t="display-narrow";i.primarySelector.addEventListener("click",function(n){n.preventDefault(),i.selectedSection(e,i.primarySelector,i.primaryColumn,i.secondaryColumn,t)}),i.secondarySelector.addEventListener("click",function(n){n.preventDefault(),i.selectedSection(e,i.secondarySelector,i.secondaryColumn,i.primaryColumn,t)}),i.hideInactiveSectionInitially(i.primaryColumn,i.secondaryColumn,e,t)}(),this.sideBySideViewAvailable()){var c=this.doc.getElementById("siteHeader");this.$global=this.doc.querySelector(".global-inner"),this.sideBySideView=new s(this.$global,this.$elm.dataset.sideBySideLink,c,this.window,this.doc),this.insertSideBySideListItem()}if(this.jumpLinks.length>0){var u=function(){if(i.mainTarget=i.doc.querySelector(".main"),!i.mainTarget)return{v:void 0};i.collapsibleSectionHeadings=e.getAllCollapsibleSectionHeadings(i.doc),i.isScrollingHandled=!1;var t=a.throttle(function(){i.handleScrolling()},50);i.isViewportWideEnoughForJumpMenu()&&i.startHandlingScrolling(t,i.handleScrolling),i.window.addEventListener("resize",a.throttle(function(){i.handleResize(t,i.handleScrolling)},200))}();if("object"===("undefined"==typeof u?"undefined":o(u)))return u.v}}}return r(e,[{key:"isViewportWideEnoughForJumpMenu",value:function(){return this.window.matchMedia("(min-width: 1200px)").matches}},{key:"handleResize",value:function(e,t){var i=this.isViewportWideEnoughForJumpMenu();!this.isScrollingHandled&&i?this.startHandlingScrolling(e,t):this.isScrollingHandled&&!i&&this.stopHandlingScrolling(e)}},{key:"startHandlingScrolling",value:function(e,t){this.window.addEventListener("scroll",e),this.isScrollingHandled=!0,t.call(this)}},{key:"stopHandlingScrolling",value:function(e){this.window.removeEventListener("scroll",e),this.isScrollingHandled=!1}},{key:"handleScrolling",value:function(){this.$jumpLinksList&&this.handleHighlighting(a.closest),this.handlePositioning()}},{key:"handleHighlighting",value:function(t){var i=this.findFirstInView(this.collapsibleSectionHeadings,this.doc,this.window),n=this.collapsibleSectionHeadings[0]?this.collapsibleSectionHeadings[0].innerHTML:"",o=e.findSectionForLinkHighlight(i,n,t);if(o&&"string"==typeof o.id){var r=e.findLinkToHighlight(this.$jumpLinksList,'[href="#'+o.id+'"]');r&&e.updateHighlighting(r,this.jumpLinks)}}},{key:"findFirstInView",value:function(e,t,i){var n=[].slice.call(e),o=null;return n.forEach(function(e){o||a.isTopInView(e,t,i)&&(o=e)}),o}},{key:"handlePositioning",value:function(){var e=this.$navDetect.getBoundingClientRect().bottom;if(this.$elm.classList.contains(this.cssFixedClassName)){if(e>0)return void this.$elm.classList.remove(this.cssFixedClassName);var t=this.mainTarget.getBoundingClientRect().bottom;if(t<this.$elm.offsetHeight){var i=t-this.$elm.offsetHeight;return void(this.$elm.style.top=i+"px")}return void(t>=this.window.innerHeight&&(this.$elm.style.top="0px"))}e<0&&(this.$elm.classList.add(this.cssFixedClassName),this.$elm.style.top="0px")}},{key:"sideBySideViewAvailable",value:function(){var e=this,t=this.$elm.dataset.sideBySideLink,i=function(){return!(!t||!t.match(/^https:\/\/.*$/))},n=function(){try{if(!e.window.CSS||!e.window.CSS.supports)return!1}catch(t){return!1}return e.window.CSS.supports("text-orientation","sideways")||e.window.CSS.supports("-webkit-text-orientation","sideways")};return i()&&n()}},{key:"insertSideBySideListItem",value:function(){var e=this,t=this.doc.querySelector(".view-selector__list"),i=this.doc.querySelector(".view-selector__list-item--secondary + .view-selector__list-item");if(i){var n=a.buildElement("li",["view-selector__list-item","view-selector__list-item--side-by-side"],"",t,i),o=a.buildElement("a",["view-selector__link","view-selector__link--side-by-side"],"<span>Side by side</span>",n);return o.setAttribute("href",this.$elm.dataset.sideBySideLink),o.addEventListener("click",function(t){t.preventDefault(),e.sideBySideView.open()}),n}}},{key:"selectedSection",value:function(e,t,i,n,o){this.addActiveClass(e,t),this.showSelectedArea(i,n,o)}},{key:"addActiveClass",value:function(e,t){var i=this.$elm.querySelector("."+e);i.classList.remove(e),t.parentNode.classList.add(e)}},{key:"showSelectedArea",value:function(e,t,i){e.classList.remove(i),t.classList.add(i)}},{key:"hideInactiveSectionInitially",value:function(e,t,i,n){this.primarySelector.parentNode.classList.contains(i)?t.classList.add(n):e.classList.add(n)}}],[{key:"getAllCollapsibleSectionHeadings",value:function(e){return e.querySelectorAll('[data-behaviour="ArticleSection"] > .article-section__header .article-section__header_text')}},{key:"updateHighlighting",value:function(t,i){e.clearJumpLinkHighlight(i),e.highlightJumpLink(t)}},{key:"findSectionForLinkHighlight",value:function(e,t,i){if(e)return e.innerHTML===t||e.getBoundingClientRect().top<48?i.call(null,e,".article-section"):i.call(null,e,".article-section").previousElementSibling}},{key:"clearJumpLinkHighlight",value:function(e){var t=[].slice.call(e);t.forEach(function(e){e.classList.remove("view-selector__jump_link--active")})}},{key:"findLinkToHighlight",value:function(e,t){return e.querySelector(t)}},{key:"highlightJumpLink",value:function(e){e.classList.add("view-selector__jump_link--active")}}]),e}()},{"../libs/elife-utils":45,"./SideBySideView":35}],43:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t){n(this,e),this.$elm=t,this.$prev=document.createElement("div"),this.$next=document.createElement("div"),this.build(),this.$prev.addEventListener("click",this.prev),this.$next.addEventListener("click",this.next)}return o(e,[{key:"build",value:function(){}},{key:"prev",value:function(e){e.preventDefault()}},{key:"next",value:function(e){e.preventDefault()}},{key:"close",value:function(){}}]),e}()},{}],44:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../libs/elife-utils")();t.exports=function(){function e(t,i,o){return n(this,e),this.$toDismiss=t,this.doc=o,this.cookieName=e.deriveCookieName(this.$toDismiss),this.hasCookieName(this.cookieName)&&this.hasPreviouslyBeenDismissed(this.cookieName,this.doc.cookie)?void this.hide():(this.cookieExpiryDate=e.setCookieExpiryDate(this.$toDismiss),void(this.$button=this.buildButton(i)))}return o(e,[{key:"hasPreviouslyBeenDismissed",value:function(e,t){return"true"===r.getCookieValue(e,t)}},{key:"hasCookieName",value:function(e){return e&&e.length}},{key:"buildButton",value:function(e){var t=r.buildElement("button",["dismiss-button"],"",e);return t.setAttribute("aria-label","Dismiss this"),t.addEventListener("click",this.dismiss.bind(this)),t}},{key:"setCookie",value:function(){this.cookieName&&this.cookieName.length&&(this.doc.cookie=this.cookieName+"=true; expires="+this.cookieExpiryDate+"; path=/;")}},{key:"hide",value:function(){this.$toDismiss.classList.add("hidden")}},{key:"dismiss",value:function(){this.hide(),this.setCookie()}}],[{key:"setCookieExpiryDate",value:function(e){if(e.dataset.cookieExpires)return e.dataset.cookieExpires}},{key:"deriveCookieName",value:function(e){var t=e.dataset.cookieNameRoot;return e.id&&e.id.length&&t&&t.length?""+t+e.id:""}}]),e}()},{"../libs/elife-utils":45}],45:[function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(e,t,i,n,o){var r=document.createElement(e),s="string"==typeof n?document.querySelector(n):n,a=function(){if(o){if("boolean"==typeof o)return s.firstElementChild instanceof HTMLElement?s.firstElementChild:null;if("string"==typeof o)return s.querySelector(o);if(o instanceof HTMLElement)return o}}();if(Array.isArray(t)&&t.forEach(function(e){r.classList.add(e)}),i&&(r.innerHTML=i),s)if(a){if(a.parentNode!==s)throw new ReferenceError("Trying to attach an element with respect to an element sibling, but the two elements do not share a common parent.");s.insertBefore(r,a)}else s.appendChild(r);return r}function t(e){return new Promise(function(t,i){var n=new XMLHttpRequest;n.addEventListener("load",function(){t(n.responseText)}),n.addEventListener("error",i),n.open("GET",e),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send()})}function i(e,t){function i(e){return e?"number"==typeof e?e+"px":"string"==typeof e?(e+="px",e.replace(/((px)+)$/,"px")):void 0:"0px"}if(!(e instanceof HTMLElement&&Array.isArray(t)))return!1;var n=i(t[0]),o=i(t[1]),r=["webkitTransform","mozTransform","msTransform","oTransform","transform"];r.forEach(function(t){void 0!==e.style[t]&&(e.style[t]="translate("+n+", "+o+")")})}function s(e){if("0"===e)return 0;var t=parseFloat(e);if(isNaN(t))throw new Error("Can't parse argument as a float: "+e);return Math.round(t)}function a(e){return 0===e?""+e:e+"px"}function l(e,t,i){var n=s(e),o=n,r="add";switch(["subtract","multiply","divide"].indexOf(i)>-1&&(r=i),r){case"add":o=n+t;break;case"subtract":o=n-t;break;case"multiply":o=n*t;break;case"divide":o=n/t}return a(o)}function c(e){var t=s(e)*-1;return a(t)}function u(e,t){if(!(e instanceof Node&&t instanceof Node))return!1;var i=e.compareDocumentPosition(t);return!!(i&e.DOCUMENT_POSITION_CONTAINED_BY||0===i)}function d(e,t,i){if(0===e.search(/https?:\/\//))return!1;if(e===t.id)return!0;var n=i.getElementById(e);return u(t,n)}function h(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,n=null,o=null,r=function(){return e.apply(i,o)};return function(){o=arguments,clearTimeout(n),n=setTimeout(r,t)}}function f(e,t){var i=(e.document||e.ownerDocument).querySelectorAll(t),n=void 0;do for(n=i.length;--n>=0&&i.item(n)!==e;);while(n<0&&(e=e.parentElement));return e}function p(e){if(e instanceof HTMLElement){for(var t=1,i=e.previousElementSibling;i;)t+=1,i=i.previousElementSibling;return t}throw new TypeError("Expected HTMLElement")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(i,n){var o=document.createElement("script");o.src=e,t&&(o.integrity=t,o.crossOrigin="anonymous"),o.addEventListener("load",function(){i(o)},!1),o.addEventListener("error",function(){n(o)},!1),document.body.appendChild(o)})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(i,n){var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.href=e,t&&(o.integrity=t,o.crossOrigin="anonymous"),o.addEventListener("load",function(){i(o)},!1),o.addEventListener("error",function(){n(o)},!1),document.head.appendChild(o)})}function y(){var e={};return e.promise=new Promise(function(t,i){e.resolve=function(e){t(e)},e.reject=function(e){i(e)}}),e}function g(e){var t;return(t=[]).concat.apply(t,n(e))}function b(e,i){var n=i.location.href.split("#")[0];return e=e.split("#")[0],e===n?Promise.resolve(i.document):(void 0===i.remoteDocuments&&(i.remoteDocuments={}),e in i.remoteDocuments||(i.remoteDocuments[e]=t(e).then(function(e){var t=i.document.createElement("div");return t.innerHTML=e,t})),i.remoteDocuments[e])}function w(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i]);return e}function _(t,i,n,o,r){var s=Array.isArray(t)?t:[t],a=Array.isArray(n)?n:[n],l=e(i,a);return o&&w(l,o),s.forEach(function(e){return l.appendChild(e)}),r?r(l):l}function k(e,t){var i=void 0;try{i=new CustomEvent(e,{detail:t})}catch(n){i=document.createEvent(e),i.initCustomEvent(e,!0,!0,{detail:t})}return i}function S(e){if(history.replaceState)window.location.href=e.href,history.replaceState(null,null,e.href);else{var t=document.getElementById(e.hash.slice(1));t&&window.scrollTo(0,t.offsetTop)}}function L(t,i,n){if(!document.getElementById(n)){var o=e("div",["overlay","hidden"],"",t,i);return n&&(o.id=n),o}}function x(e,t,i){var n=e.getBoundingClientRect(),o=t.documentElement;return n.top>=0&&n.top<=(i.innerHeight||o.clientHeight)&&n.left>=0&&n.left<=(i.innerWidth||o.clientWidth)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=void 0,n=void 0;return function(){var o=+new Date,r=arguments;i&&o<i+t?(window.clearTimeout(n),n=window.setTimeout(function(){i=o,e.apply(null,r)},t)):(i=o,e.apply(null,r))}}function C(e){return e.matchMedia("(min-width: 900px)").matches}function $(e){return e.dataset&&e.dataset.behaviour&&e.dataset.behaviour.indexOf("ArticleSection")>-1}function T(e){return e.classList.contains("article-section--collapsed")}function j(e){if(e.dataset.itemType)return e.dataset.itemType;var t=e.querySelector("[data-item-type]");return t?t.dataset.itemType:null}function A(e){var t=e.querySelectorAll(".article-section--collapsed");[].slice.call(t).forEach(function(e){e.dispatchEvent(k("expandsection"))})}function M(){var e=document.createElement("p");e.style.width="100%";var t=document.createElement("div");t.style.position="absolute",t.style.left="0px",t.style.visibility="hidden",t.style.width="100px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return i===n&&(n=t.clientWidth),document.body.removeChild(t),i-n}function H(e,t){var i="";return t.split("; ").forEach(function(t){if(0===t.indexOf(e)){var n=new RegExp(e+"=([^;]*)"),o=t.match(n)[1];i=decodeURIComponent(o)}}),i}function B(e,t,i){e.console.error(i+":"+t)}function O(e,t,i){var n=e.querySelectorAll(t);n.length<=2||n.forEach(function(e,t){t<n.length-1&&e.getBoundingClientRect().top!==n[t+1].getBoundingClientRect().top?e.classList.add(i):e.classList.remove(i)})}var P=function(){var e=function(){function e(){o(this,e),this.used=[]}return r(e,[{key:"isValid",value:function(e,t){return!(this.used.indexOf(e)>-1)&&!(t&&t.getElementById&&"function"==typeof t.getElementById&&t.getElementById(e))}},{key:"get",value:function(e,t){var i=""+e||"default_",n=(""+Math.random()).replace(/\./,""),o=i+n;return this.isValid(o,t)?(this.used.push(o),o):void this.get(e,t)}}]),e}();return new e}();return{adjustPxString:l,areElementsNested:u,isIdOfOrWithinSection:d,buildElement:e,calcScrollbarWidth:M,closest:f,create$pageOverlay:L,debounce:h,eventCreator:k,expandCollapsedSections:A,getItemType:j,loadJavaScript:v,loadStyleSheet:m,defer:y,flatten:g,getCookieValue:H,invertPxString:c,isCollapsedArticleSection:T,isCollapsibleArticleSection:$,isTopInView:x,isMultiColumnDisplay:C,jumpToAnchor:S,loadData:t,getOrdinalAmongstSiblingElements:p,remoteDoc:b,throttle:E,uniqueIds:P,updateElementTranslate:i,wrapElements:_,logError:B,removeSeparatorFromLastOnLine:O}}},{}],46:[function(e,t,i){"use strict";e("core-js/es6/promise"),e("core-js/es6/set"),e("core-js/fn/object/assign"),e("core-js/fn/symbol"),e("core-js/fn/symbol/iterator"),e("element-closest"),t.exports=function(){!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}()}()},{"core-js/es6/promise":48,"core-js/es6/set":49,"core-js/fn/object/assign":50,"core-js/fn/symbol":51,"core-js/fn/symbol/iterator":52,"element-closest":137}],47:[function(e,t,i){"use strict";e("./libs/polyfills"),document.querySelector("html").classList.add("js");var n={};n.AboutProfiles=e("./components/AboutProfiles"),n.AnnotationTeaser=e("./components/AnnotationTeaser"),n.ArticleDownloadLinksList=e("./components/ArticleDownloadLinksList"),n.ArticleSection=e("./components/ArticleSection"),n.AssetNavigation=e("./components/AssetNavigation"),n.AssetViewer=e("./components/AssetViewer"),n.AudioPlayer=e("./components/AudioPlayer"),n.Authors=e("./components/Authors"),n.ButtonClipboard=e("./components/ButtonClipboard"),n.CallToAction=e("./components/CallToAction"),n.CheckPMC=e("./components/CheckPMC"),n.ContentAside=e("./components/ContentAside"),n.DelegateBehaviour=e("./components/DelegateBehaviour"),n.FilterPanel=e("./components/FilterPanel"),n.FragmentHandler=e("./components/FragmentHandler"),n.HiddenUntilChecked=e("./components/HiddenUntilChecked"),n.Highlights=e("./components/Highlights"),n.HypothesisLoader=e("./components/HypothesisLoader"),n.HypothesisOpener=e("./components/HypothesisOpener"),n.HypothesisTrigger=e("./components/HypothesisTrigger"),n.InfoBar=e("./components/InfoBar"),n.JumpMenu=e("./components/JumpMenu"),n.LoginControl=e("./components/LoginControl"),n.MainMenu=e("./components/MainMenu"),n.Math=e("./components/Math"),n.MediaChapterListingItem=e("./components/MediaChapterListingItem"),n.Modal=e("./components/Modal"),n.Pager=e("./components/Pager"),n.PersonalisedCoverDownload=e("./components/PersonalisedCoverDownload"),n.Popup=e("./components/Popup"),n.SearchBox=e("./components/SearchBox"),n.SectionListingLink=e("./components/SectionListingLink"),n.SelectNav=e("./components/SelectNav"),n.SideBySideView=e("./components/SideBySideView"),n.SiteHeader=e("./components/SiteHeader"),n.SpeechBubble=e("./components/SpeechBubble"),n.StatisticCollection=e("./components/StatisticCollection"),n.TabbedNavigation=e("./components/TabbedNavigation"),n.ToggleableCaption=e("./components/ToggleableCaption"),n.Twitter=e("./components/Twitter"),n.ViewerModal=e("./components/ViewerModal"),n.ViewSelector=e("./components/ViewSelector");var o=function(){function e(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=i?i:e.getAttribute("data-behaviour"),r=o.trim().split(" ");
r.forEach(function(i){t.isRegistered(i)||n[i]&&"function"==typeof n[i]&&(new n[i](e,window,window.document),n[i].isSingleton&&t.register(i))}),e.dataset.behaviourInitialised=!0}var t=function(){function e(e){return i.indexOf(e)>-1}function t(e){i.push(e)}var i=[];return{isRegistered:e,register:t}}();n.DelegateBehaviour.setInitialiseComponent(e);var i=document.querySelectorAll("[data-behaviour]");if(i&&[].forEach.call(i,function(t){return e(t)}),"MutationObserver"in window){var o=new MutationObserver(function(){var t=document.querySelectorAll("[data-behaviour]:not([data-behaviour-initialised])");t&&[].forEach.call(t,function(t){return e(t)})});o.observe(document.body,{childList:!0,subtree:!0})}};new o},{"./components/AboutProfiles":1,"./components/AnnotationTeaser":2,"./components/ArticleDownloadLinksList":3,"./components/ArticleSection":4,"./components/AssetNavigation":5,"./components/AssetViewer":6,"./components/AudioPlayer":7,"./components/Authors":8,"./components/ButtonClipboard":9,"./components/CallToAction":10,"./components/CheckPMC":11,"./components/ContentAside":12,"./components/DelegateBehaviour":13,"./components/FilterPanel":14,"./components/FragmentHandler":15,"./components/HiddenUntilChecked":16,"./components/Highlights":17,"./components/HypothesisLoader":18,"./components/HypothesisOpener":19,"./components/HypothesisTrigger":20,"./components/InfoBar":21,"./components/JumpMenu":22,"./components/LoginControl":23,"./components/MainMenu":24,"./components/Math":25,"./components/MediaChapterListingItem":26,"./components/Modal":27,"./components/Pager":29,"./components/PersonalisedCoverDownload":30,"./components/Popup":31,"./components/SearchBox":32,"./components/SectionListingLink":33,"./components/SelectNav":34,"./components/SideBySideView":35,"./components/SiteHeader":36,"./components/SpeechBubble":37,"./components/StatisticCollection":38,"./components/TabbedNavigation":39,"./components/ToggleableCaption":40,"./components/Twitter":41,"./components/ViewSelector":42,"./components/ViewerModal":43,"./libs/polyfills":46}],48:[function(e,t,i){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":62,"../modules/es6.object.to-string":129,"../modules/es6.promise":130,"../modules/es6.string.iterator":132,"../modules/web.dom.iterable":136}],49:[function(e,t,i){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),t.exports=e("../modules/_core").Set},{"../modules/_core":62,"../modules/es6.object.to-string":129,"../modules/es6.set":131,"../modules/es6.string.iterator":132,"../modules/web.dom.iterable":136}],50:[function(e,t,i){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":62,"../../modules/es6.object.assign":128}],51:[function(e,t,i){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":62,"../../modules/es6.object.to-string":129,"../../modules/es6.symbol":133,"../../modules/es7.symbol.async-iterator":134,"../../modules/es7.symbol.observable":135}],52:[function(e,t,i){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":124,"../../modules/es6.string.iterator":132,"../../modules/web.dom.iterable":136}],53:[function(e,t,i){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],54:[function(e,t,i){var n=e("./_wks")("unscopables"),o=Array.prototype;void 0==o[n]&&e("./_hide")(o,n,{}),t.exports=function(e){o[n][e]=!0}},{"./_hide":74,"./_wks":125}],55:[function(e,t,i){t.exports=function(e,t,i,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(i+": incorrect invocation!");return e}},{}],56:[function(e,t,i){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":82}],57:[function(e,t,i){var n=e("./_to-iobject"),o=e("./_to-length"),r=e("./_to-index");t.exports=function(e){return function(t,i,s){var a,l=n(t),c=o(l.length),u=r(s,c);if(e&&i!=i){for(;c>u;)if(a=l[u++],a!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},{"./_to-index":116,"./_to-iobject":118,"./_to-length":119}],58:[function(e,t,i){var n=e("./_cof"),o=e("./_wks")("toStringTag"),r="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(i){}};t.exports=function(e){var t,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=s(t=Object(e),o))?i:r?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":59,"./_wks":125}],59:[function(e,t,i){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],60:[function(e,t,i){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),r=e("./_redefine-all"),s=e("./_ctx"),a=e("./_an-instance"),l=e("./_defined"),c=e("./_for-of"),u=e("./_iter-define"),d=e("./_iter-step"),h=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,v=f?"_s":"size",m=function(e,t){var i,n=p(t);if("F"!==n)return e._i[n];for(i=e._f;i;i=i.n)if(i.k==t)return i};t.exports={getConstructor:function(e,t,i,u){var d=e(function(e,n){a(e,d,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=n&&c(n,i,e[u],e)});return r(d.prototype,{clear:function(){for(var e=this,t=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete t[i.i];e._f=e._l=void 0,e[v]=0},"delete":function(e){var t=this,i=m(t,e);if(i){var n=i.n,o=i.p;delete t._i[i.i],i.r=!0,o&&(o.n=n),n&&(n.p=o),t._f==i&&(t._f=n),t._l==i&&(t._l=o),t[v]--}return!!i},forEach:function(e){a(this,d,"forEach");for(var t,i=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(i(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),f&&n(d.prototype,"size",{get:function(){return l(this[v])}}),d},def:function(e,t,i){var n,o,r=m(e,t);return r?r.v=i:(e._l=r={i:o=p(t,!0),k:t,v:i,p:n=e._l,n:void 0,r:!1},e._f||(e._f=r),n&&(n.n=r),e[v]++,"F"!==o&&(e._i[o]=r)),e},getEntry:m,setStrong:function(e,t,i){u(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,i=e._l;i&&i.r;)i=i.p;return e._t&&(e._l=i=i?i.n:e._t._f)?"keys"==t?d(0,i.k):"values"==t?d(0,i.v):d(0,[i.k,i.v]):(e._t=void 0,d(1))},i?"entries":"values",!i,!0),h(t)}}},{"./_an-instance":55,"./_ctx":63,"./_defined":64,"./_descriptors":65,"./_for-of":71,"./_iter-define":85,"./_iter-step":87,"./_meta":91,"./_object-create":94,"./_object-dp":95,"./_redefine-all":106,"./_set-species":109}],61:[function(e,t,i){"use strict";var n=e("./_global"),o=e("./_export"),r=e("./_redefine"),s=e("./_redefine-all"),a=e("./_meta"),l=e("./_for-of"),c=e("./_an-instance"),u=e("./_is-object"),d=e("./_fails"),h=e("./_iter-detect"),f=e("./_set-to-string-tag"),p=e("./_inherit-if-required");t.exports=function(e,t,i,v,m,y){var g=n[e],b=g,w=m?"set":"add",_=b&&b.prototype,k={},S=function(e){var t=_[e];r(_,e,"delete"==e?function(e){return!(y&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,i){return t.call(this,0===e?0:e,i),this})};if("function"==typeof b&&(y||_.forEach&&!d(function(){(new b).entries().next()}))){var L=new b,x=L[w](y?{}:-0,1)!=L,E=d(function(){L.has(1)}),C=h(function(e){new b(e)}),$=!y&&d(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});C||(b=t(function(t,i){c(t,b,e);var n=p(new g,t,b);return void 0!=i&&l(i,m,n[w],n),n}),b.prototype=_,_.constructor=b),(E||$)&&(S("delete"),S("has"),m&&S("get")),($||x)&&S(w),y&&_.clear&&delete _.clear}else b=v.getConstructor(t,e,m,w),s(b.prototype,i),a.NEED=!0;return f(b,e),k[e]=b,o(o.G+o.W+o.F*(b!=g),k),y||v.setStrong(b,e,m),b}},{"./_an-instance":55,"./_export":69,"./_fails":70,"./_for-of":71,"./_global":72,"./_inherit-if-required":77,"./_is-object":82,"./_iter-detect":86,"./_meta":91,"./_redefine":107,"./_redefine-all":106,"./_set-to-string-tag":110}],62:[function(e,t,i){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],63:[function(e,t,i){var n=e("./_a-function");t.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":53}],64:[function(e,t,i){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],65:[function(e,t,i){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":70}],66:[function(e,t,i){var n=e("./_is-object"),o=e("./_global").document,r=n(o)&&n(o.createElement);t.exports=function(e){return r?o.createElement(e):{}}},{"./_global":72,"./_is-object":82}],67:[function(e,t,i){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],68:[function(e,t,i){var n=e("./_object-keys"),o=e("./_object-gops"),r=e("./_object-pie");t.exports=function(e){var t=n(e),i=o.f;if(i)for(var s,a=i(e),l=r.f,c=0;a.length>c;)l.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":100,"./_object-keys":103,"./_object-pie":104}],69:[function(e,t,i){var n=e("./_global"),o=e("./_core"),r=e("./_hide"),s=e("./_redefine"),a=e("./_ctx"),l="prototype",c=function(e,t,i){var u,d,h,f,p=e&c.F,v=e&c.G,m=e&c.S,y=e&c.P,g=e&c.B,b=v?n:m?n[t]||(n[t]={}):(n[t]||{})[l],w=v?o:o[t]||(o[t]={}),_=w[l]||(w[l]={});v&&(i=t);for(u in i)d=!p&&b&&void 0!==b[u],h=(d?b:i)[u],f=g&&d?a(h,n):y&&"function"==typeof h?a(Function.call,h):h,b&&s(b,u,h,e&c.U),w[u]!=h&&r(w,u,f),y&&_[u]!=h&&(_[u]=h)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},{"./_core":62,"./_ctx":63,"./_global":72,"./_hide":74,"./_redefine":107}],70:[function(e,t,i){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],71:[function(e,t,i){var n=e("./_ctx"),o=e("./_iter-call"),r=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),l=e("./core.get-iterator-method"),c={},u={},i=t.exports=function(e,t,i,d,h){var f,p,v,m,y=h?function(){return e}:l(e),g=n(i,d,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(r(y)){for(f=a(e.length);f>b;b++)if(m=t?g(s(p=e[b])[0],p[1]):g(e[b]),m===c||m===u)return m}else for(v=y.call(e);!(p=v.next()).done;)if(m=o(v,g,p.value,t),m===c||m===u)return m};i.BREAK=c,i.RETURN=u},{"./_an-object":56,"./_ctx":63,"./_is-array-iter":80,"./_iter-call":83,"./_to-length":119,"./core.get-iterator-method":126}],72:[function(e,t,i){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],73:[function(e,t,i){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],74:[function(e,t,i){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,i){return n.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},{"./_descriptors":65,"./_object-dp":95,"./_property-desc":105}],75:[function(e,t,i){t.exports=e("./_global").document&&document.documentElement},{"./_global":72}],76:[function(e,t,i){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":65,"./_dom-create":66,"./_fails":70}],77:[function(e,t,i){var n=e("./_is-object"),o=e("./_set-proto").set;t.exports=function(e,t,i){var r,s=t.constructor;return s!==i&&"function"==typeof s&&(r=s.prototype)!==i.prototype&&n(r)&&o&&o(e,r),e}},{"./_is-object":82,"./_set-proto":108}],78:[function(e,t,i){t.exports=function(e,t,i){var n=void 0===i;switch(t.length){case 0:return n?e():e.call(i);case 1:return n?e(t[0]):e.call(i,t[0]);case 2:return n?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},{}],79:[function(e,t,i){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":59}],80:[function(e,t,i){var n=e("./_iterators"),o=e("./_wks")("iterator"),r=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||r[o]===e)}},{"./_iterators":88,"./_wks":125}],81:[function(e,t,i){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":59}],82:[function(e,t,i){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],83:[function(e,t,i){var n=e("./_an-object");t.exports=function(e,t,i,o){try{return o?t(n(i)[0],i[1]):t(i)}catch(r){var s=e["return"];throw void 0!==s&&n(s.call(e)),r}}},{"./_an-object":56}],84:[function(e,t,i){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),r=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,i){e.prototype=n(s,{next:o(1,i)}),r(e,t+" Iterator")}},{"./_hide":74,"./_object-create":94,"./_property-desc":105,"./_set-to-string-tag":110,"./_wks":125}],85:[function(e,t,i){"use strict";var n=e("./_library"),o=e("./_export"),r=e("./_redefine"),s=e("./_hide"),a=e("./_has"),l=e("./_iterators"),c=e("./_iter-create"),u=e("./_set-to-string-tag"),d=e("./_object-gpo"),h=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",m="values",y=function(){return this};t.exports=function(e,t,i,g,b,w,_){c(i,t,g);var k,S,L,x=function(e){if(!f&&e in T)return T[e];switch(e){case v:return function(){return new i(this,e)};case m:return function(){return new i(this,e)}}return function(){return new i(this,e)}},E=t+" Iterator",C=b==m,$=!1,T=e.prototype,j=T[h]||T[p]||b&&T[b],A=j||x(b),M=b?C?x("entries"):A:void 0,H="Array"==t?T.entries||j:j;if(H&&(L=d(H.call(new e)),L!==Object.prototype&&(u(L,E,!0),n||a(L,h)||s(L,h,y))),C&&j&&j.name!==m&&($=!0,A=function(){return j.call(this)}),n&&!_||!f&&!$&&T[h]||s(T,h,A),l[t]=A,l[E]=y,b)if(k={values:C?A:x(m),keys:w?A:x(v),entries:M},_)for(S in k)S in T||r(T,S,k[S]);else o(o.P+o.F*(f||$),t,k);return k}},{"./_export":69,"./_has":73,"./_hide":74,"./_iter-create":84,"./_iterators":88,"./_library":90,"./_object-gpo":101,"./_redefine":107,"./_set-to-string-tag":110,"./_wks":125}],86:[function(e,t,i){var n=e("./_wks")("iterator"),o=!1;try{var r=[7][n]();r["return"]=function(){o=!0},Array.from(r,function(){throw 2})}catch(s){}t.exports=function(e,t){if(!t&&!o)return!1;var i=!1;try{var r=[7],s=r[n]();s.next=function(){return{done:i=!0}},r[n]=function(){return s},e(r)}catch(a){}return i}},{"./_wks":125}],87:[function(e,t,i){t.exports=function(e,t){return{value:t,done:!!e}}},{}],88:[function(e,t,i){t.exports={}},{}],89:[function(e,t,i){var n=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var i,r=o(e),s=n(r),a=s.length,l=0;a>l;)if(r[i=s[l++]]===t)return i}},{"./_object-keys":103,"./_to-iobject":118}],90:[function(e,t,i){t.exports=!1},{}],91:[function(e,t,i){var n=e("./_uid")("meta"),o=e("./_is-object"),r=e("./_has"),s=e("./_object-dp").f,a=0,l=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),u=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,n)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[n].i},h=function(e,t){if(!r(e,n)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[n].w},f=function(e){return c&&p.NEED&&l(e)&&!r(e,n)&&u(e),e},p=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},{"./_fails":70,"./_has":73,"./_is-object":82,"./_object-dp":95,"./_uid":122}],92:[function(e,t,i){var n=e("./_global"),o=e("./_task").set,r=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,l="process"==e("./_cof")(s);t.exports=function(){var e,t,i,c=function(){var n,o;for(l&&(n=s.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?i():t=void 0,r}}t=void 0,n&&n.enter()};if(l)i=function(){s.nextTick(c)};else if(r){var u=!0,d=document.createTextNode("");new r(c).observe(d,{characterData:!0}),i=function(){d.data=u=!u}}else if(a&&a.resolve){var h=a.resolve();i=function(){h.then(c)}}else i=function(){o.call(n,c)};return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,i()),t=o}}},{"./_cof":59,"./_global":72,"./_task":115}],93:[function(e,t,i){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),r=e("./_object-pie"),s=e("./_to-object"),a=e("./_iobject"),l=Object.assign;t.exports=!l||e("./_fails")(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var i=s(e),l=arguments.length,c=1,u=o.f,d=r.f;l>c;)for(var h,f=a(arguments[c++]),p=u?n(f).concat(u(f)):n(f),v=p.length,m=0;v>m;)d.call(f,h=p[m++])&&(i[h]=f[h]);return i}:l},{"./_fails":70,"./_iobject":79,"./_object-gops":100,"./_object-keys":103,"./_object-pie":104,"./_to-object":120}],94:[function(e,t,i){var n=e("./_an-object"),o=e("./_object-dps"),r=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},l="prototype",c=function(){var t,i=e("./_dom-create")("iframe"),n=r.length,o="<",s=">";for(i.style.display="none",e("./_html").appendChild(i),i.src="javascript:",t=i.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),c=t.F;n--;)delete c[l][r[n]];return c()};t.exports=Object.create||function(e,t){var i;return null!==e?(a[l]=n(e),i=new a,a[l]=null,i[s]=e):i=c(),void 0===t?i:o(i,t)}},{"./_an-object":56,"./_dom-create":66,"./_enum-bug-keys":67,"./_html":75,"./_object-dps":96,"./_shared-key":111}],95:[function(e,t,i){var n=e("./_an-object"),o=e("./_ie8-dom-define"),r=e("./_to-primitive"),s=Object.defineProperty;i.f=e("./_descriptors")?Object.defineProperty:function(e,t,i){if(n(e),t=r(t,!0),n(i),o)try{return s(e,t,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},{"./_an-object":56,"./_descriptors":65,"./_ie8-dom-define":76,"./_to-primitive":121}],96:[function(e,t,i){var n=e("./_object-dp"),o=e("./_an-object"),r=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var i,s=r(t),a=s.length,l=0;a>l;)n.f(e,i=s[l++],t[i]);return e}},{"./_an-object":56,"./_descriptors":65,"./_object-dp":95,"./_object-keys":103}],97:[function(e,t,i){var n=e("./_object-pie"),o=e("./_property-desc"),r=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),l=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;i.f=e("./_descriptors")?c:function(e,t){if(e=r(e),t=s(t,!0),l)try{return c(e,t)}catch(i){}if(a(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":65,"./_has":73,"./_ie8-dom-define":76,"./_object-pie":104,"./_property-desc":105,"./_to-iobject":118,"./_to-primitive":121}],98:[function(e,t,i){var n=e("./_to-iobject"),o=e("./_object-gopn").f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(t){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==r.call(e)?a(e):o(n(e))}},{"./_object-gopn":99,"./_to-iobject":118}],99:[function(e,t,i){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":67,"./_object-keys-internal":102}],100:[function(e,t,i){i.f=Object.getOwnPropertySymbols},{}],101:[function(e,t,i){var n=e("./_has"),o=e("./_to-object"),r=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":73,"./_shared-key":111,"./_to-object":120}],102:[function(e,t,i){var n=e("./_has"),o=e("./_to-iobject"),r=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var i,a=o(e),l=0,c=[];for(i in a)i!=s&&n(a,i)&&c.push(i);for(;t.length>l;)n(a,i=t[l++])&&(~r(c,i)||c.push(i));return c}},{"./_array-includes":57,"./_has":73,"./_shared-key":111,"./_to-iobject":118}],103:[function(e,t,i){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":67,"./_object-keys-internal":102}],104:[function(e,t,i){i.f={}.propertyIsEnumerable},{}],105:[function(e,t,i){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],106:[function(e,t,i){var n=e("./_redefine");t.exports=function(e,t,i){for(var o in t)n(e,o,t[o],i);return e}},{"./_redefine":107}],107:[function(e,t,i){var n=e("./_global"),o=e("./_hide"),r=e("./_has"),s=e("./_uid")("src"),a="toString",l=Function[a],c=(""+l).split(a);e("./_core").inspectSource=function(e){return l.call(e)},(t.exports=function(e,t,i,a){var l="function"==typeof i;l&&(r(i,"name")||o(i,"name",t)),e[t]!==i&&(l&&(r(i,s)||o(i,s,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:a?e[t]?e[t]=i:o(e,t,i):(delete e[t],o(e,t,i)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||l.call(this)})},{"./_core":62,"./_global":72,"./_has":73,"./_hide":74,"./_uid":122}],108:[function(e,t,i){var n=e("./_is-object"),o=e("./_an-object"),r=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,i,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),i=!(t instanceof Array)}catch(o){i=!0}return function(e,t){return r(e,t),i?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:r}},{"./_an-object":56,"./_ctx":63,"./_is-object":82,"./_object-gopd":97}],109:[function(e,t,i){"use strict";var n=e("./_global"),o=e("./_object-dp"),r=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t=n[e];r&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_descriptors":65,"./_global":72,"./_object-dp":95,"./_wks":125}],110:[function(e,t,i){var n=e("./_object-dp").f,o=e("./_has"),r=e("./_wks")("toStringTag");t.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,r)&&n(e,r,{configurable:!0,value:t})}},{"./_has":73,"./_object-dp":95,"./_wks":125}],111:[function(e,t,i){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":112,"./_uid":122}],112:[function(e,t,i){var n=e("./_global"),o="__core-js_shared__",r=n[o]||(n[o]={});t.exports=function(e){return r[e]||(r[e]={})}},{"./_global":72}],113:[function(e,t,i){var n=e("./_an-object"),o=e("./_a-function"),r=e("./_wks")("species");t.exports=function(e,t){var i,s=n(e).constructor;return void 0===s||void 0==(i=n(s)[r])?t:o(i)}},{"./_a-function":53,"./_an-object":56,"./_wks":125}],114:[function(e,t,i){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,i){var r,s,a=String(o(t)),l=n(i),c=a.length;return l<0||l>=c?e?"":void 0:(r=a.charCodeAt(l),r<55296||r>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):r:e?a.slice(l,l+2):(r-55296<<10)+(s-56320)+65536)}}},{"./_defined":64,"./_to-integer":117}],115:[function(e,t,i){var n,o,r,s=e("./_ctx"),a=e("./_invoke"),l=e("./_html"),c=e("./_dom-create"),u=e("./_global"),d=u.process,h=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,v=0,m={},y="onreadystatechange",g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){g.call(e.data)};h&&f||(h=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return m[++v]=function(){a("function"==typeof e?e:Function(e),t)},n(v),v},f=function(e){delete m[e]},"process"==e("./_cof")(d)?n=function(e){d.nextTick(s(g,e,1))}:p?(o=new p,r=o.port2,o.port1.onmessage=b,n=s(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):n=y in c("script")?function(e){l.appendChild(c("script"))[y]=function(){l.removeChild(this),g.call(e)}}:function(e){setTimeout(s(g,e,1),0)}),t.exports={set:h,clear:f}},{"./_cof":59,"./_ctx":63,"./_dom-create":66,"./_global":72,"./_html":75,"./_invoke":78}],116:[function(e,t,i){var n=e("./_to-integer"),o=Math.max,r=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):r(e,t)}},{"./_to-integer":117}],117:[function(e,t,i){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],118:[function(e,t,i){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":64,"./_iobject":79}],119:[function(e,t,i){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":117}],120:[function(e,t,i){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":64}],121:[function(e,t,i){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":82}],122:[function(e,t,i){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],123:[function(e,t,i){var n=e("./_global"),o=e("./_core"),r=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=r?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":62,"./_global":72,"./_library":90,"./_object-dp":95,"./_wks-ext":124}],124:[function(e,t,i){i.f=e("./_wks")},{"./_wks":125}],125:[function(e,t,i){var n=e("./_shared")("wks"),o=e("./_uid"),r=e("./_global").Symbol,s="function"==typeof r,a=t.exports=function(e){return n[e]||(n[e]=s&&r[e]||(s?r:o)("Symbol."+e))};a.store=n},{"./_global":72,"./_shared":112,"./_uid":122}],126:[function(e,t,i){var n=e("./_classof"),o=e("./_wks")("iterator"),r=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||r[n(e)]}},{"./_classof":58,"./_core":62,"./_iterators":88,"./_wks":125}],127:[function(e,t,i){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),r=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,i):"values"==t?o(0,e[i]):o(0,[i,e[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":54,"./_iter-define":85,"./_iter-step":87,"./_iterators":88,"./_to-iobject":118}],128:[function(e,t,i){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":69,"./_object-assign":93}],129:[function(e,t,i){"use strict";var n=e("./_classof"),o={};o[e("./_wks")("toStringTag")]="z",o+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":58,"./_redefine":107,"./_wks":125}],130:[function(e,t,i){"use strict";var n,o,r,s=e("./_library"),a=e("./_global"),l=e("./_ctx"),c=e("./_classof"),u=e("./_export"),d=e("./_is-object"),h=e("./_a-function"),f=e("./_an-instance"),p=e("./_for-of"),v=e("./_species-constructor"),m=e("./_task").set,y=e("./_microtask")(),g="Promise",b=a.TypeError,w=a.process,_=a[g],w=a.process,k="process"==c(w),S=function(){},L=!!function(){try{var t=_.resolve(1),i=(t.constructor={})[e("./_wks")("species")]=function(e){e(S,S)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(S)instanceof i}catch(n){}}(),x=function(e,t){return e===t||e===_&&t===r},E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},C=function(e){return x(_,e)?new $(e):new o(e)},$=o=function(e){var t,i;this.promise=new e(function(e,n){if(void 0!==t||void 0!==i)throw b("Bad Promise constructor");t=e,i=n}),this.resolve=h(t),this.reject=h(i)},T=function(e){try{e()}catch(t){return{error:t}}},j=function(e,t){if(!e._n){e._n=!0;var i=e._c;y(function(){for(var n=e._v,o=1==e._s,r=0,s=function(t){var i,r,s=o?t.ok:t.fail,a=t.resolve,l=t.reject,c=t.domain;try{s?(o||(2==e._h&&H(e),e._h=1),s===!0?i=n:(c&&c.enter(),i=s(n),c&&c.exit()),i===t.promise?l(b("Promise-chain cycle")):(r=E(i))?r.call(i,a,l):a(i)):l(n)}catch(u){l(u)}};i.length>r;)s(i[r++]);e._c=[],e._n=!1,t&&!e._h&&A(e)})}},A=function(e){m.call(a,function(){var t,i,n,o=e._v;if(M(e)&&(t=T(function(){k?w.emit("unhandledRejection",o,e):(i=a.onunhandledrejection)?i({promise:e,reason:o}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=k||M(e)?2:1),e._a=void 0,t)throw t.error})},M=function(e){if(1==e._h)return!1;for(var t,i=e._a||e._c,n=0;i.length>n;)if(t=i[n++],t.fail||!M(t.promise))return!1;return!0},H=function(e){m.call(a,function(){var t;k?w.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},O=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw b("Promise can't be resolved itself");(t=E(e))?y(function(){var n={_w:i,_d:!1};try{t.call(e,l(O,n,1),l(B,n,1))}catch(o){B.call(n,o)}}):(i._v=e,i._s=1,j(i,!1))}catch(n){B.call({_w:i,_d:!1},n)}}};L||(_=function(e){f(this,_,g,"_h"),h(e),n.call(this);try{e(l(O,this,1),l(B,this,1))}catch(t){B.call(this,t)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(_.prototype,{then:function(e,t){var i=C(v(this,_));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=k?w.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&j(this,!1),i.promise},"catch":function(e){return this.then(void 0,e)}}),$=function(){var e=new n;this.promise=e,this.resolve=l(O,e,1),this.reject=l(B,e,1)}),u(u.G+u.W+u.F*!L,{Promise:_}),e("./_set-to-string-tag")(_,g),e("./_set-species")(g),r=e("./_core")[g],u(u.S+u.F*!L,g,{reject:function(e){var t=C(this),i=t.reject;return i(e),t.promise}}),u(u.S+u.F*(s||!L),g,{resolve:function(e){if(e instanceof _&&x(e.constructor,this))return e;var t=C(this),i=t.resolve;return i(e),t.promise}}),u(u.S+u.F*!(L&&e("./_iter-detect")(function(e){_.all(e)["catch"](S)})),g,{all:function(e){var t=this,i=C(t),n=i.resolve,o=i.reject,r=T(function(){var i=[],r=0,s=1;p(e,!1,function(e){var a=r++,l=!1;i.push(void 0),s++,t.resolve(e).then(function(e){l||(l=!0,i[a]=e,--s||n(i))},o)}),--s||n(i)});return r&&o(r.error),i.promise},race:function(e){var t=this,i=C(t),n=i.reject,o=T(function(){p(e,!1,function(e){t.resolve(e).then(i.resolve,n)})});return o&&n(o.error),i.promise}})},{"./_a-function":53,"./_an-instance":55,"./_classof":58,"./_core":62,"./_ctx":63,"./_export":69,"./_for-of":71,"./_global":72,"./_is-object":82,"./_iter-detect":86,"./_library":90,"./_microtask":92,"./_redefine-all":106,"./_set-species":109,"./_set-to-string-tag":110,"./_species-constructor":113,"./_task":115,"./_wks":125}],131:[function(e,t,i){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},{"./_collection":61,"./_collection-strong":60}],132:[function(e,t,i){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,
done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":85,"./_string-at":114}],133:[function(e,t,i){"use strict";var n=e("./_global"),o=e("./_has"),r=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),l=e("./_meta").KEY,c=e("./_fails"),u=e("./_shared"),d=e("./_set-to-string-tag"),h=e("./_uid"),f=e("./_wks"),p=e("./_wks-ext"),v=e("./_wks-define"),m=e("./_keyof"),y=e("./_enum-keys"),g=e("./_is-array"),b=e("./_an-object"),w=e("./_to-iobject"),_=e("./_to-primitive"),k=e("./_property-desc"),S=e("./_object-create"),L=e("./_object-gopn-ext"),x=e("./_object-gopd"),E=e("./_object-dp"),C=e("./_object-keys"),$=x.f,T=E.f,j=L.f,A=n.Symbol,M=n.JSON,H=M&&M.stringify,B="prototype",O=f("_hidden"),P=f("toPrimitive"),q={}.propertyIsEnumerable,I=u("symbol-registry"),N=u("symbols"),F=u("op-symbols"),D=Object[B],R="function"==typeof A,W=n.QObject,V=!W||!W[B]||!W[B].findChild,U=r&&c(function(){return 7!=S(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=$(D,t);n&&delete D[t],T(e,t,i),n&&e!==D&&T(D,t,n)}:T,z=function(e){var t=N[e]=S(A[B]);return t._k=e,t},J=R&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},Y=function(e,t,i){return e===D&&Y(F,t,i),b(e),t=_(t,!0),b(i),o(N,t)?(i.enumerable?(o(e,O)&&e[O][t]&&(e[O][t]=!1),i=S(i,{enumerable:k(0,!1)})):(o(e,O)||T(e,O,k(1,{})),e[O][t]=!0),U(e,t,i)):T(e,t,i)},K=function(e,t){b(e);for(var i,n=y(t=w(t)),o=0,r=n.length;r>o;)Y(e,i=n[o++],t[i]);return e},G=function(e,t){return void 0===t?S(e):K(S(e),t)},Q=function(e){var t=q.call(this,e=_(e,!0));return!(this===D&&o(N,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(N,e)||o(this,O)&&this[O][e])||t)},X=function(e,t){if(e=w(e),t=_(t,!0),e!==D||!o(N,t)||o(F,t)){var i=$(e,t);return!i||!o(N,t)||o(e,O)&&e[O][t]||(i.enumerable=!0),i}},Z=function(e){for(var t,i=j(w(e)),n=[],r=0;i.length>r;)o(N,t=i[r++])||t==O||t==l||n.push(t);return n},ee=function(e){for(var t,i=e===D,n=j(i?F:w(e)),r=[],s=0;n.length>s;)!o(N,t=n[s++])||i&&!o(D,t)||r.push(N[t]);return r};R||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(i){this===D&&t.call(F,i),o(this,O)&&o(this[O],e)&&(this[O][e]=!1),U(this,e,k(1,i))};return r&&V&&U(D,e,{configurable:!0,set:t}),z(e)},a(A[B],"toString",function(){return this._k}),x.f=X,E.f=Y,e("./_object-gopn").f=L.f=Z,e("./_object-pie").f=Q,e("./_object-gops").f=ee,r&&!e("./_library")&&a(D,"propertyIsEnumerable",Q,!0),p.f=function(e){return z(f(e))}),s(s.G+s.W+s.F*!R,{Symbol:A});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)f(te[ie++]);for(var te=C(f.store),ie=0;te.length>ie;)v(te[ie++]);s(s.S+s.F*!R,"Symbol",{"for":function(e){return o(I,e+="")?I[e]:I[e]=A(e)},keyFor:function(e){if(J(e))return m(I,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!R,"Object",{create:G,defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),M&&s(s.S+s.F*(!R||c(function(){var e=A();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!J(e)){for(var t,i,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);return t=n[1],"function"==typeof t&&(i=t),!i&&g(t)||(t=function(e,t){if(i&&(t=i.call(this,e,t)),!J(t))return t}),n[1]=t,H.apply(M,n)}}}),A[B][P]||e("./_hide")(A[B],P,A[B].valueOf),d(A,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./_an-object":56,"./_descriptors":65,"./_enum-keys":68,"./_export":69,"./_fails":70,"./_global":72,"./_has":73,"./_hide":74,"./_is-array":81,"./_keyof":89,"./_library":90,"./_meta":91,"./_object-create":94,"./_object-dp":95,"./_object-gopd":97,"./_object-gopn":99,"./_object-gopn-ext":98,"./_object-gops":100,"./_object-keys":103,"./_object-pie":104,"./_property-desc":105,"./_redefine":107,"./_set-to-string-tag":110,"./_shared":112,"./_to-iobject":118,"./_to-primitive":121,"./_uid":122,"./_wks":125,"./_wks-define":123,"./_wks-ext":124}],134:[function(e,t,i){e("./_wks-define")("asyncIterator")},{"./_wks-define":123}],135:[function(e,t,i){e("./_wks-define")("observable")},{"./_wks-define":123}],136:[function(e,t,i){for(var n=e("./es6.array.iterator"),o=e("./_redefine"),r=e("./_global"),s=e("./_hide"),a=e("./_iterators"),l=e("./_wks"),c=l("iterator"),u=l("toStringTag"),d=a.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var p,v=h[f],m=r[v],y=m&&m.prototype;if(y){y[c]||s(y,c,d),y[u]||s(y,u,v),a[v]=d;for(p in n)y[p]||o(y,p,n[p],!0)}}},{"./_global":72,"./_hide":74,"./_iterators":88,"./_redefine":107,"./_wks":125,"./es6.array.iterator":127}],137:[function(e,t,i){!function(e){"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,i=(t.document||t.ownerDocument).querySelectorAll(e),n=0;i[n]&&i[n]!==t;)++n;return Boolean(i[n])}),"function"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype)},{}],138:[function(e,t,i){"use strict";function n(e,t,i){for(var n=i.imageWeight,o=void 0===n?2:n,_=i.maxLines,k=1,S=1,L=0,x=!1,E=[],C=e.length;L<C;L++){var $=L?e.slice(L):e,T=$.search(b),j=T>-1?T:$.length;if(L+=j,!x&&(k+=j,k>t)){L-=k-t;break}if(T===-1)break;var A=e.charCodeAt(L);if(A===m)if("!--"===e.substr(L+1,3)){var M=e.indexOf("-->",L+4)+3;L=M-1}else if("![CDATA["===e.substr(L+1,8)){var H=e.indexOf("]]>",L+9)+3;L=H-1}else{if(k===t&&e.charCodeAt(L+1)!==p){k++;break}for(var B=0,O=L,P=!1;;){if(O++,O>=C)throw new Error("Invalid HTML: "+e);var q=e.charCodeAt(O);if(P)B?q===B&&(P=!1):a(q)?P=!1:q===g&&(P=!1,O--);else if(q===y){for(;a(e.charCodeAt(O+1));)O++;P=!0;var I=e.charCodeAt(O+1);I===d||I===f?(B=I,O++):B=0}else if(q===g){var N=e.charCodeAt(L+1)===p,F=L+(N?2:1),D=Math.min(r(e,F),O),R=e.slice(F,D).toLowerCase();if(N){var W=E.pop();if(W!==R)throw new Error("Invalid HTML: "+e);if(("math"===R||"svg"===R)&&(x=E.indexOf("math")!==-1||E.indexOf("svg")!==-1,!x&&(k+=o,k>t)))break}else if(c.indexOf(R)!==-1||e.charCodeAt(O-1)===p){if("br"===R){if(S++,S>_)break}else if("img"===R&&(k+=o,k>t))break}else E.push(R),"math"!==R&&"svg"!==R||(x=!0);L=O;break}}if(k>t||S>_)break}else if(A===h){for(var V=L+1;e.charCodeAt(V)!==v;)if(V++,V>=C)throw new Error("Invalid HTML: "+e);if(!x&&(k++,k>t))break;L=V}else if(A===u){if(!x){if(k++,k>t)break;if(S++,S>_)break}}else{if(!x&&(k++,k>t))break;var U=e.charCodeAt(L+1);56320===(64512&U)&&L++}}if(k>t){for(var z=l(e,L),J=L+z.length;e.charCodeAt(J)===m&&e.charCodeAt(J+1)===p;){var Y=e.indexOf(">",J+2)+1;if(!Y)break;J=Y}if(J&&(J===e.length||s(e,J))){if("<"===z||"&"===z)throw new Error("Invalid HTML: "+e);L+=z.length,z=e.charAt(L)}for(;"<"===z&&e.charCodeAt(L+1)===p;){var K=E.pop(),G=K?e.indexOf(">",L+2):-1;if(G===-1||e.replace(w,"").slice(L+2,G)!==K)throw new Error("Invalid HTML: "+e);L=G+1,z=e.charAt(L)}if(L<e.length){if(!i.breakWords)for(var Q=L-1;Q>=0;Q--){var X=e.charCodeAt(Q);if(X===g||X===v)break;if(X===u){L=Q;break}if(a(X)){L=Q+1;break}}for(var Z=e.slice(0,L)+(s(e,L)?"":i.indicator);E.length;){var ee=E.pop();Z+="</"+ee+">"}return Z}}else if(S>_){for(var te=e.slice(0,L);E.length;){var ie=E.pop();te+="</"+ie+">"}return te}return e}function o(e,t,i){for(var n=i.maxLines,o=1,r=1,s=0,c=e.length;s<c&&(o++,!(o>t));s++){var d=e.charCodeAt(s);if(d===u){if(r++,r>n)break}else if(55296===(64512&d)){var h=e.charCodeAt(s+1);56320===(64512&h)&&s++}}if(o>t){var f=l(e,s),p=s+f.length;if(p===e.length)return e;if(e.charCodeAt(p)===u)return e.slice(0,s+f.length);if(!i.breakWords)for(var v=s-1;v>=0;v--){var m=e.charCodeAt(v);if(m===u){s=v,f="\n";break}if(a(m)){s=v+1;break}}return e.slice(0,s)+("\n"===f?"":i.indicator)}return r>n?e.slice(0,s):e}function r(e,t){for(var i=e.length,n=t;n<i;n++)if(a(e.charCodeAt(n)))return n;return i}function s(e,t){var i=e.charCodeAt(t);return i===u||i===m&&/<br[\t\n\f\r ]*\/?>/i.test(e.slice(t))}function a(e){return 9===e||10===e||12===e||13===e||32===e}function l(e,t){var i=e.charCodeAt(t);if(55296===(64512&i)){var n=e.charCodeAt(t+1);if(56320===(64512&n))return String.fromCharCode(i,n)}return String.fromCharCode(i)}var c=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],u=10,d=34,h=38,f=39,p=47,v=59,m=60,y=61,g=62,b=/[<&\n\ud800-\udbff]/,w=/\s+$/;t.exports=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return e?(e=e.toString(),void 0===i.indicator&&(i.indicator="…"),i.html?n(e,t,i):o(e,t,i)):""}},{}]},{},[47]);
//# sourceMappingURL=main.js.map
